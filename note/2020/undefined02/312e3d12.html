<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="QrYuOcgHntsSXYVGvWVZS98NACE7wP7Rx3KVbK2_F1s">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-128x128-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Web,">





  <link rel="alternate" href="/atom.xml" title="离沫凌天๓" type="application/atom+xml">






<meta name="description" content="信息收集技术在渗透测试过程中，第一步就是进行信息收集，信息收集的过程，很多人将其写成了工具、脚本，于是我们就有了很多指纹识别工具、敏感文件、目录扫描工具，敏感信息探测工具，信息收集工具等等。很多前辈也都曾经说过：”渗透测试的本质就是信息收集” 信息收集介绍常规收集 备份文件泄露 接口泄露(小米主题商店接口信息泄露开发者敏感信息（身份证、手机等）  从信息泄露到未授权访问 端口扫描与目录扫描端口多扫">
<meta name="keywords" content="Web">
<meta property="og:type" content="article">
<meta property="og:title" content="信息收集">
<meta property="og:url" content="https://winthorlimo.github.io/note/2020/undefined02/312e3d12.html">
<meta property="og:site_name" content="离沫凌天๓">
<meta property="og:description" content="信息收集技术在渗透测试过程中，第一步就是进行信息收集，信息收集的过程，很多人将其写成了工具、脚本，于是我们就有了很多指纹识别工具、敏感文件、目录扫描工具，敏感信息探测工具，信息收集工具等等。很多前辈也都曾经说过：”渗透测试的本质就是信息收集” 信息收集介绍常规收集 备份文件泄露 接口泄露(小米主题商店接口信息泄露开发者敏感信息（身份证、手机等）  从信息泄露到未授权访问 端口扫描与目录扫描端口多扫">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://qiniuyun.lintstar.top/30th-anniversary-of-the-world-wide-web-google-1552390014.gif">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200724172909442.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200724174304528.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200724174331551.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200724174446728.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200724174502081.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200724174547698.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802002840.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802003028.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802003451.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802003849.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/1558883226923-5598295.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802004152.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/1558908508820.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802001346.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802001531.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802001743.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200725110133223.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200725111813506.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802010505.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802083757.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802083911.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/1558963651187.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200725145502796.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200725145945806.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/1558999835083.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802084139.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200801233335.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200801230948.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200801233524.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802093603.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802095959.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802100228.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802100851.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802101033.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802101438.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802101517.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802095420.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802095640.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802104146.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802112732.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802113100.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/20200802114217.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200727154132756.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200727155401167.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/image-20200727202443406.png">
<meta property="og:image" content="http://qiniuyun.lintstar.top/1586916483667.png">
<meta property="og:updated_time" content="2020-08-20T09:26:41.757Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="信息收集">
<meta name="twitter:description" content="信息收集技术在渗透测试过程中，第一步就是进行信息收集，信息收集的过程，很多人将其写成了工具、脚本，于是我们就有了很多指纹识别工具、敏感文件、目录扫描工具，敏感信息探测工具，信息收集工具等等。很多前辈也都曾经说过：”渗透测试的本质就是信息收集” 信息收集介绍常规收集 备份文件泄露 接口泄露(小米主题商店接口信息泄露开发者敏感信息（身份证、手机等）  从信息泄露到未授权访问 端口扫描与目录扫描端口多扫">
<meta name="twitter:image" content="http://qiniuyun.lintstar.top/30th-anniversary-of-the-world-wide-web-google-1552390014.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://winthorlimo.github.io/note/2020/undefined02/312e3d12.html">





  <title>信息收集 | 离沫凌天๓</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">离沫凌天๓</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">花开花落 一路上起起跌跌</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://winthorlimo.github.io/note/2020/undefined02/312e3d12.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="离沫凌天๓">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="离沫凌天๓">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">信息收集</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-02T22:00:00+08:00">
                2020-08-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  11.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  47
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="信息收集技术"><a href="#信息收集技术" class="headerlink" title="信息收集技术"></a>信息收集技术</h1><p>在渗透测试过程中，第一步就是进行信息收集，信息收集的过程，很多人将其写成了工具、脚本，于是我们就有了很多指纹识别工具、敏感文件、目录扫描工具，敏感信息探测工具，信息收集工具等等。很多前辈也都曾经说过：”渗透测试的本质就是信息收集”</p>
<h2 id="信息收集介绍"><a href="#信息收集介绍" class="headerlink" title="信息收集介绍"></a>信息收集介绍</h2><h3 id="常规收集"><a href="#常规收集" class="headerlink" title="常规收集"></a>常规收集</h3><ul>
<li>备份文件泄露</li>
<li>接口泄露(小米主题商店接口信息泄露开发者敏感信息（身份证、手机等）</li>
</ul>
<h3 id="从信息泄露到未授权访问"><a href="#从信息泄露到未授权访问" class="headerlink" title="从信息泄露到未授权访问"></a>从信息泄露到未授权访问</h3><ul>
<li>端口扫描与目录扫描<br><code>端口多扫几个</code></li>
</ul>
<h3 id="内网收集"><a href="#内网收集" class="headerlink" title="内网收集"></a>内网收集</h3><ul>
<li>内网服务器邮箱记录</li>
<li>浏览器保存密码记录</li>
<li>ESXI 认证<br><code>Vcenter 可以尝试勾选启用windows登录认证</code></li>
</ul>
<p>信息收集的方式可以分为两种：主动和被动。</p>
<p><strong>主动的信息收集方式：</strong> 通过直接访问、扫描网站，这种将流量流经网站的行为。</p>
<p><strong>被动的信息收集方式：</strong> 利用第三方服务和互联网信息进行收集。</p>
<h1 id="被动信息收集（OSINT）"><a href="#被动信息收集（OSINT）" class="headerlink" title="被动信息收集（OSINT）"></a>被动信息收集（OSINT）</h1><h2 id="Google-Hack"><a href="#Google-Hack" class="headerlink" title="Google Hack"></a>Google Hack</h2><p>在渗透测试过程中第一步就是信息收集，由于传统的信息收集工具包括指纹识别、目录扫描器等会留下痕迹，某些情况下还会被拦截，因此，能否在不惊动目标服务器的情况下，对目标网站进行前期最重要的信息收集，并且尽可能的获得更多的信息呢？</p>
<p><img src="http://qiniuyun.lintstar.top/30th-anniversary-of-the-world-wide-web-google-1552390014.gif" alt="30th-anniversary-of-the-world-wide-web-google-1552390014"></p>
<h3 id="默认搜索"><a href="#默认搜索" class="headerlink" title="默认搜索"></a>默认搜索</h3><p>搜索引擎基本语法，直接在搜索框中输入搜索词时，谷歌默认进行模糊搜索，并能对长短语或语句进行自动拆分成小的词进行搜索。</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200724172909442.png" alt="image-20200724172909442"></p>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>谷歌的通配符是星号 *，用通配符代替关键词或短语中无法确定的字词。</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200724174304528.png" alt="image-20200724174304528"></p>
<h3 id="逻辑非"><a href="#逻辑非" class="headerlink" title="逻辑非"></a>逻辑非</h3><p>排除某个搜索结果：渗透测试 -习近平 百度无广告</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200724174331551.png" alt="image-20200724174331551"></p>
<h3 id="常用关键词"><a href="#常用关键词" class="headerlink" title="常用关键词"></a>常用关键词</h3><table>
<thead>
<tr>
<th>关键词</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>site</td>
<td>指定域名</td>
</tr>
<tr>
<td>intext</td>
<td>正文中存在关键词的网页</td>
</tr>
<tr>
<td>intitle</td>
<td>标题中存在关键词的网页</td>
</tr>
<tr>
<td>inurl</td>
<td>URL中存在关键词的网页</td>
</tr>
<tr>
<td>filetype</td>
<td>搜索指定文件类型</td>
</tr>
</tbody>
</table>
<h3 id="常见后台查找"><a href="#常见后台查找" class="headerlink" title="常见后台查找"></a>常见后台查找</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">intitle:后台登录</span><br><span class="line"></span><br><span class="line">inurl:login|admin|manage|member|admin_login|login_admin|system|login|user|main|cms</span><br><span class="line"></span><br><span class="line">intext:管理|后台|登陆|用户名|密码|系统|帐号</span><br></pre></td></tr></table></figure>
<h3 id="实际演示"><a href="#实际演示" class="headerlink" title="实际演示"></a>实际演示</h3><h4 id="搜索南京政府的子域名信息"><a href="#搜索南京政府的子域名信息" class="headerlink" title="搜索南京政府的子域名信息"></a>搜索南京政府的子域名信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site:nanjing.gov.cn</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/image-20200724174446728.png" alt="image-20200724174446728"></p>
<h4 id="搜索互联网上的登录入口"><a href="#搜索互联网上的登录入口" class="headerlink" title="搜索互联网上的登录入口"></a>搜索互联网上的登录入口</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intitle:登录</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/image-20200724174502081.png" alt="image-20200724174502081"></p>
<h4 id="搜索百度的相关登录入口"><a href="#搜索百度的相关登录入口" class="headerlink" title="搜索百度的相关登录入口"></a>搜索百度的相关登录入口</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intitle:登录 site:baidu.com -zhidao.baidu.com -baike.baidu.com -jingyan.baidu.com</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/image-20200724174547698.png" alt="image-20200724174547698"></p>
<h4 id="查找互联网敏感文件"><a href="#查找互联网敏感文件" class="headerlink" title="查找互联网敏感文件"></a>查找互联网敏感文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filetype:mdb|doc|xlsx|pdf</span><br><span class="line">密码 filetype:xls</span><br></pre></td></tr></table></figure>
<h4 id="查找被黑政府站点"><a href="#查找被黑政府站点" class="headerlink" title="查找被黑政府站点"></a>查找被黑政府站点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">北京赛车 inurl:gov.cn</span><br><span class="line">intitle:北京赛车 inurl:gov.cn</span><br></pre></td></tr></table></figure>
<h2 id="物联网搜索引擎"><a href="#物联网搜索引擎" class="headerlink" title="物联网搜索引擎"></a>物联网搜索引擎</h2><h3 id="Shodan"><a href="#Shodan" class="headerlink" title="Shodan"></a>Shodan</h3><p><img src="http://qiniuyun.lintstar.top/20200802002840.png" alt="20200802002840"><br><strong><a href="https://www.shodan.io" target="_blank" rel="noopener">https://www.shodan.io</a></strong></p>
<p>物联网搜索引擎，是互联网上最可怕的搜索引擎，搜索所有和互联网关联的服务器、摄像头、打印机、路由器等等。</p>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><table>
<thead>
<tr>
<th>关键词</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>net</td>
<td>搜索指定ip地址或者子网，c段</td>
</tr>
<tr>
<td>hostname</td>
<td>搜索指定的域名或者服务器</td>
</tr>
<tr>
<td>port</td>
<td>搜索开放指定端口的设备</td>
</tr>
<tr>
<td>org</td>
<td>搜索属于指定组织或者公司的设备</td>
</tr>
<tr>
<td>product</td>
<td>搜索运行指定产品或者软件操作系统的设备</td>
</tr>
<tr>
<td>version</td>
<td>指定软件的版本</td>
</tr>
<tr>
<td>isp</td>
<td>搜索指定isp供应商的设备</td>
</tr>
<tr>
<td>country</td>
<td>搜索指定国家的设备</td>
</tr>
<tr>
<td>city</td>
<td>搜索指定城市的设备</td>
</tr>
</tbody>
</table>
<p>语句之间可以相互组合使用，可以运用自己的思维，相互组合成自己需要的搜索语句</p>
<h3 id="实际操作"><a href="#实际操作" class="headerlink" title="实际操作"></a>实际操作</h3><h4 id="查找位于国内的-Nginx-服务器"><a href="#查找位于国内的-Nginx-服务器" class="headerlink" title="查找位于国内的 Nginx 服务器"></a>查找位于国内的 Nginx 服务器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx country:cn</span><br></pre></td></tr></table></figure>
<h4 id="搜索位南京开启-3389-端口的服务器"><a href="#搜索位南京开启-3389-端口的服务器" class="headerlink" title="搜索位南京开启 3389 端口的服务器"></a>搜索位南京开启 3389 端口的服务器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">port:3389 city:nanjing</span><br><span class="line">port:3389 os:&quot;windows 10&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索海康威视摄像头"><a href="#搜索海康威视摄像头" class="headerlink" title="搜索海康威视摄像头"></a>搜索海康威视摄像头</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hikvision-Webs country:cn city:nanjing</span><br></pre></td></tr></table></figure>
<h4 id="查看Cisco思科设备全球分布"><a href="#查看Cisco思科设备全球分布" class="headerlink" title="查看Cisco思科设备全球分布"></a>查看Cisco思科设备全球分布</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isp:cisco</span><br><span class="line">isp:cisco country:cn</span><br></pre></td></tr></table></figure>
<h4 id="查看华为设备全球分布"><a href="#查看华为设备全球分布" class="headerlink" title="查看华为设备全球分布"></a>查看华为设备全球分布</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isp:huawei</span><br></pre></td></tr></table></figure>
<p><strong><code>windows口令必须大小写后，弱口令TOP：P@ssw0rd</code></strong></p>
<h3 id="实用技巧"><a href="#实用技巧" class="headerlink" title="实用技巧"></a>实用技巧</h3><p>Shodan 实用技巧，查找互相关联的网站：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import mmh3</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">response = requests.get(&apos;https://www.baidu.com/favicon.ico&apos;)</span><br><span class="line">favicon = response.content.encode(&apos;base64&apos;)</span><br><span class="line">hash = mmh3.hash(favicon)</span><br><span class="line">print(hash)</span><br></pre></td></tr></table></figure>
<p>计算出的 hash 用如下语法来反查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.favicon.hash：hash</span><br></pre></td></tr></table></figure>
<p><strong>查找出类似模板的IP地址：<a href="http://111.231.41.219/" target="_blank" rel="noopener">http://111.231.41.219/</a></strong></p>
<p><img src="http://qiniuyun.lintstar.top/20200802003028.png" alt="20200802003028"></p>
<p>查看原始数据 Ctrl+F 搜索 favicon</p>
<p><img src="http://qiniuyun.lintstar.top/20200802003451.png" alt="20200802003451"></p>
<p>根据hash值反差：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.favicon.hash:-865290023</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200802003849.png" alt="20200802003849"><br><strong><code>找同模板网站：看是不是一个logo/favicon 用小米logo的hash值反查</code></strong></p>
<p><strong>研究院真实案例分享</strong></p>
<p>目标黄色网站 - 拿不下 - 找到同模板的网站 - 爆破 - 进入系统 - 通用漏洞 getshell - 拿到源码 - 代码审计 - 发现漏洞 - 拿下目标网站 - getshell - 突破限制进内网 - 内网漫游拿下数据</p>
<h3 id="Zoomeye"><a href="#Zoomeye" class="headerlink" title="Zoomeye"></a>Zoomeye</h3><p><img src="http://qiniuyun.lintstar.top/1558883226923-5598295.png" alt="1558883226923-5598295"><br><strong><a href="https://www.zoomeye.org" target="_blank" rel="noopener">https://www.zoomeye.org</a></strong></p>
<p>ZoomEye 中文名为“钟馗之眼”，它定位于网络空间搜索引擎，能对暴露在公网的主机设备及网站组件进行全方位搜索（只要有IP地址即可搜索到），发现其中的漏洞，揪 出网络中“藏着掖着的问题”。ZoomEye和Shodan的区别是ZoomEye目前侧重于Web层面的资产发现而Shodan则侧重于主机层面。</p>
<h3 id="主机搜索"><a href="#主机搜索" class="headerlink" title="主机搜索"></a>主机搜索</h3><h4 id="组件名称"><a href="#组件名称" class="headerlink" title="组件名称"></a>组件名称</h4><p>app: 组件名。 ver: 组件版本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:”Apache httpd” ver:”2.2.16″</span><br></pre></td></tr></table></figure>
<h4 id="端口"><a href="#端口" class="headerlink" title="端口"></a>端口</h4><p>port: 开放端口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">port:3389</span><br></pre></td></tr></table></figure>
<h4 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h4><p>os: 操作系统。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os:linux</span><br></pre></td></tr></table></figure>
<h4 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h4><p>service: 结果分析中的“服务名”字段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 公网路由器：</span><br><span class="line">service:routersetup</span><br><span class="line"># 公网摄像头：</span><br><span class="line">service:webcam</span><br></pre></td></tr></table></figure>
<h4 id="主机名"><a href="#主机名" class="headerlink" title="主机名"></a>主机名</h4><p>hostname: 分析结果中的“主机名”字段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname:google.com</span><br></pre></td></tr></table></figure>
<h4 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h4><p>country: 国家或者地区代码。 city: 城市名称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 搜索美国的 Apache 服务器</span><br><span class="line">app:Apache country:US</span><br><span class="line"></span><br><span class="line"># 搜索英国的 Sendmail 服务器</span><br><span class="line">app:Sendmail country:UK</span><br></pre></td></tr></table></figure>
<h4 id="IP-地址"><a href="#IP-地址" class="headerlink" title="IP 地址"></a>IP 地址</h4><p>ip: 搜索一个指定的 IP 地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Google 的公共 DNS 服务器</span><br><span class="line">ip:8.8.8.8</span><br></pre></td></tr></table></figure>
<h4 id="CIDR"><a href="#CIDR" class="headerlink" title="CIDR"></a>CIDR</h4><p>IP 的 CIDR 网段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cidr:8.8.8.8/24</span><br></pre></td></tr></table></figure>
<h3 id="Web应用搜索"><a href="#Web应用搜索" class="headerlink" title="Web应用搜索"></a>Web应用搜索</h3><h4 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h4><p>site:网站域名。 例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">site: baidu.com</span><br></pre></td></tr></table></figure>
<h4 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h4><p>title: 页面标题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title:Nginx</span><br></pre></td></tr></table></figure>
<h4 id="关键词"><a href="#关键词" class="headerlink" title="关键词"></a>关键词</h4><p>keywords: <meta name="Keywords">定义的页面关键词。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keywords:Nginx</span><br></pre></td></tr></table></figure>
<h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>desc: <meta name="description">定义的页面说明。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc:Nginx</span><br></pre></td></tr></table></figure>
<h4 id="HTTP-头"><a href="#HTTP-头" class="headerlink" title="HTTP 头"></a>HTTP 头</h4><p>headers: HTTP 请求中的 Headers。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">headers:Server</span><br></pre></td></tr></table></figure>
<h3 id="FQFA"><a href="#FQFA" class="headerlink" title="FQFA"></a>FQFA</h3><p><img src="http://qiniuyun.lintstar.top/20200802004152.png" alt="20200802004152"><br><strong><a href="https://fofa.so" target="_blank" rel="noopener">https://fofa.so</a></strong></p>
<p>FOFA是白帽汇推出的一款网络空间资产搜索引擎。 它能够帮助企业客户迅速进行网络资产匹配、加快后续工作进程。 例如进行漏洞影响范围分析、应用分布统计、应用流行度排名统计等。</p>
<h3 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h3><p>直接输入查询语句，将从标题，html内容，http头信息，url字段中搜索</p>
<h4 id="title-”abc”-从标题中搜索abc"><a href="#title-”abc”-从标题中搜索abc" class="headerlink" title="title=”abc” 从标题中搜索abc"></a>title=”abc” 从标题中搜索abc</h4><p>标题中有北京的网站</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title=&quot;北京&quot;</span><br></pre></td></tr></table></figure>
<h4 id="header-”abc”-从http头中搜索abc"><a href="#header-”abc”-从http头中搜索abc" class="headerlink" title="header=”abc” 从http头中搜索abc"></a>header=”abc” 从http头中搜索abc</h4><p>jboss服务器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header=&quot;jboss&quot;</span><br></pre></td></tr></table></figure>
<h4 id="body-”abc”-从html正文中搜索abc"><a href="#body-”abc”-从html正文中搜索abc" class="headerlink" title="body=”abc” 从html正文中搜索abc"></a>body=”abc” 从html正文中搜索abc</h4><p>正文包含Hacked by</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">body=&quot;Hacked by&quot;</span><br></pre></td></tr></table></figure>
<h4 id="domain-”qq-com”-搜索根域名带有qq-com的网站"><a href="#domain-”qq-com”-搜索根域名带有qq-com的网站" class="headerlink" title="domain=”qq.com” 搜索根域名带有qq.com的网站"></a>domain=”qq.com” 搜索根域名带有qq.com的网站</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">domain=&quot;qq.com&quot;</span><br></pre></td></tr></table></figure>
<h4 id="host-”-gov-cn”-从url中搜索-gov-cn"><a href="#host-”-gov-cn”-从url中搜索-gov-cn" class="headerlink" title="host=”.gov.cn” 从url中搜索.gov.cn"></a>host=”.gov.cn” 从url中搜索.gov.cn</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">host=&quot;.gov.cn&quot;</span><br></pre></td></tr></table></figure>
<h4 id="教育网站"><a href="#教育网站" class="headerlink" title="教育网站"></a>教育网站</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">host=&quot;.edu.cn&quot;</span><br></pre></td></tr></table></figure>
<h4 id="port-”443”-查找对应443端口的资产"><a href="#port-”443”-查找对应443端口的资产" class="headerlink" title="port=”443” 查找对应443端口的资产"></a>port=”443” 查找对应443端口的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">port=&quot;443&quot;</span><br></pre></td></tr></table></figure>
<h4 id="ip-”1-1-1-1”-搜索ip信息"><a href="#ip-”1-1-1-1”-搜索ip信息" class="headerlink" title="ip=”1.1.1.1” 搜索ip信息"></a>ip=”1.1.1.1” 搜索ip信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">39.98.209.64</span><br></pre></td></tr></table></figure>
<h4 id="protocol-”https”-搜索制定协议类型-在开启端口扫描的情况下有效"><a href="#protocol-”https”-搜索制定协议类型-在开启端口扫描的情况下有效" class="headerlink" title="protocol=”https” 搜索制定协议类型(在开启端口扫描的情况下有效)"></a>protocol=”https” 搜索制定协议类型(在开启端口扫描的情况下有效)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protocol=&quot;https&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索指定城市的资产"><a href="#搜索指定城市的资产" class="headerlink" title="搜索指定城市的资产"></a>搜索指定城市的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">city=&quot;Beijing&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索指定行政区的资产"><a href="#搜索指定行政区的资产" class="headerlink" title="搜索指定行政区的资产"></a>搜索指定行政区的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">region=&quot;Zhejiang&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索指定国家-编码-的资产"><a href="#搜索指定国家-编码-的资产" class="headerlink" title="搜索指定国家(编码)的资产"></a>搜索指定国家(编码)的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">country=&quot;CN&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索证书-https或者imaps等-中带有google的资产"><a href="#搜索证书-https或者imaps等-中带有google的资产" class="headerlink" title="搜索证书(https或者imaps等)中带有google的资产"></a>搜索证书(https或者imaps等)中带有google的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cert=&quot;google&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索FTP协议中带有users文本的资产"><a href="#搜索FTP协议中带有users文本的资产" class="headerlink" title="搜索FTP协议中带有users文本的资产"></a>搜索FTP协议中带有users文本的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">banner=users &amp;&amp; protocol=ftp</span><br></pre></td></tr></table></figure>
<h4 id="搜索所有协议资产，支持subdomain和service两种"><a href="#搜索所有协议资产，支持subdomain和service两种" class="headerlink" title="搜索所有协议资产，支持subdomain和service两种"></a>搜索所有协议资产，支持subdomain和service两种</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type=service</span><br></pre></td></tr></table></figure>
<h4 id="搜索Windows资产"><a href="#搜索Windows资产" class="headerlink" title="搜索Windows资产"></a>搜索Windows资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os=windows</span><br></pre></td></tr></table></figure>
<h4 id="搜索IIS-7-5服务器"><a href="#搜索IIS-7-5服务器" class="headerlink" title="搜索IIS 7.5服务器"></a>搜索IIS 7.5服务器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server==&quot;Microsoft-IIS/7.5&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索海康威视设备"><a href="#搜索海康威视设备" class="headerlink" title="搜索海康威视设备"></a>搜索海康威视设备</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app=&quot;海康威视-视频监控&quot;</span><br></pre></td></tr></table></figure>
<h4 id="时间范围段搜索"><a href="#时间范围段搜索" class="headerlink" title="时间范围段搜索"></a>时间范围段搜索</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">after=&quot;2017&quot; &amp;&amp; before=&quot;2017-10-01&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索指定org-组织-的资产"><a href="#搜索指定org-组织-的资产" class="headerlink" title="搜索指定org(组织)的资产"></a>搜索指定org(组织)的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org=&quot;Amazon.com, Inc.&quot;</span><br></pre></td></tr></table></figure>
<h4 id="搜索指定udp协议的资产"><a href="#搜索指定udp协议的资产" class="headerlink" title="搜索指定udp协议的资产"></a>搜索指定udp协议的资产</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base_protocol=&quot;udp&quot;</span><br></pre></td></tr></table></figure>
<h3 id="高级搜索"><a href="#高级搜索" class="headerlink" title="高级搜索"></a>高级搜索</h3><p>可以使用括号 和 &amp;&amp; || !=等符号，如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title=&quot;powered by&quot; &amp;&amp; title!=discuz</span><br><span class="line"></span><br><span class="line">title!=&quot;powered by&quot; &amp;&amp; body=discuz</span><br><span class="line"></span><br><span class="line">( body=&quot;content=\&quot;WordPress&quot; || (header=&quot;X-Pingback&quot; &amp;&amp; header=&quot;/xmlrpc.php&quot; &amp;&amp; body=&quot;/wp-includes/&quot;) ) &amp;&amp; host=&quot;gov.cn&quot;</span><br></pre></td></tr></table></figure>
<h3 id="规则探索与发现"><a href="#规则探索与发现" class="headerlink" title="规则探索与发现"></a>规则探索与发现</h3><p><a href="https://fofa.so/subject" target="_blank" rel="noopener">https://fofa.so/subject</a></p>
<p><a href="https://fofa.so/library" target="_blank" rel="noopener">https://fofa.so/library</a></p>
<p><img src="http://qiniuyun.lintstar.top/1558908508820.png" alt="1558908508820"></p>
<h2 id="子域名收集"><a href="#子域名收集" class="headerlink" title="子域名收集"></a>子域名收集</h2><p>域名爆破是指使用爆破字段拼接主域名尝试访问，暴力破解出主域名下是否还有其他子域名。</p>
<p>例如通过某公司官网的主域名，可以暴力破解出该公司内部系统（如OA、CRM等等）的访问地址。</p>
<h3 id="爆破"><a href="#爆破" class="headerlink" title="爆破"></a>爆破</h3><h3 id="在线爆破工具"><a href="#在线爆破工具" class="headerlink" title="在线爆破工具"></a>在线爆破工具</h3><p>phpinfo.me/domain</p>
<p><img src="http://qiniuyun.lintstar.top/20200802001346.png" alt="20200802001346"></p>
<h3 id="本地工具爆破"><a href="#本地工具爆破" class="headerlink" title="本地工具爆破"></a>本地工具爆破</h3><p><strong>subDomainsBrute</strong><br><a href="https://github.com/lijiejie/subDomainsBrute" target="_blank" rel="noopener">https://github.com/lijiejie/subDomainsBrute</a></p>
<p>每秒可扫描3000个域名</p>
<p><strong>Layer 子域名挖掘机</strong></p>
<p>法师经典作品，操作简单容易上手</p>
<p><a href="https://github.com/euphrat1ca/LayerDomainFinder" target="_blank" rel="noopener">https://github.com/euphrat1ca/LayerDomainFinder</a></p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><h4 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h4><p><code>site: domain</code></p>
<p><img src="http://qiniuyun.lintstar.top/20200802001531.png" alt="20200802001531"></p>
<h4 id="OneForAll"><a href="#OneForAll" class="headerlink" title="OneForAll"></a>OneForAll</h4><p>👊 OneForAll是一款功能强大的子域收集工具</p>
<p><img src="http://qiniuyun.lintstar.top/20200802001743.png" alt="20200802001743"></p>
<h4 id="自己动手丰衣足食"><a href="#自己动手丰衣足食" class="headerlink" title="自己动手丰衣足食"></a>自己动手丰衣足食</h4><p>Django 编写 Web 漏洞扫描器挖坑记录： <a href="https://www.sqlsec.com/2020/05/webscan.html" target="_blank" rel="noopener">https://www.sqlsec.com/2020/05/webscan.html</a></p>
<p>域名探测功能发现比较流行的子域名探测功能 one for all 用的也是很多 API 接口，于是打算使用第三方服务来获取子域名，这样获取的速度会很快。</p>
<p>因为这些子域名是存入数据库的，所以也就顺便增加了域名监控功能，每次扫描可以统计出新增的域名数量。域名探测所使用的 6 个接口分别如下，大家也可以直接拿去使用，做好对应的数据提取就可以了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 爱站</span><br><span class="line">https://baidurank.aizhan.com/baidu/&#123;domain&#125;/</span><br><span class="line"></span><br><span class="line"># 百度云观测</span><br><span class="line">http://ce.baidu.com/index/getRelatedSites?site_address=&#123;domain&#125;</span><br><span class="line"></span><br><span class="line"># hackertarget</span><br><span class="line">https://api.hackertarget.com/hostsearch/?q=&#123;domain&#125;</span><br><span class="line"></span><br><span class="line"># IP138</span><br><span class="line">https://site.ip138.com/&#123;domain&#125;/domain.htm</span><br><span class="line"></span><br><span class="line"># crt.sh SSL 证书反查</span><br><span class="line">https://crt.sh/?q=%25.&#123;domain&#125;</span><br><span class="line"></span><br><span class="line"># 千寻</span><br><span class="line">url = &apos;https://www.dnsscan.cn/dns.html&apos;</span><br><span class="line">datas = &#123;&quot;ecmsfrom&quot;: &apos;8.8.8.8&apos;, &quot;show&quot;: &apos;none&apos;, &quot;keywords&quot;: domain&#125;</span><br></pre></td></tr></table></figure>
<p><strong>API接口找子域名比爆破更好用的原因：</strong></p>
<ul>
<li>大厂SRC 2级往上子域名很多，用字典爆破难以成功</li>
<li>大厂会有WAF拦截</li>
</ul>
<p>域名访问超时直接丢弃结果的，然后再获取网页标题，这个在实际的信息收集中比较实用的，一些 404 403 的资产可以跳过，减少无意义的浪费时间。</p>
<p>证书透明度(CT)是为了防止证书授权机构(CA)或者其他恶意人员伪造服务器证书而诞生的一个项目。</p>
<p>CT会要求CA将数字证书(SSL/TLS证书)公开并发布将颁发记录同步到日志服务器中。而日志服务器则会提供给用户一个查找某域名颁发的所有数字证书途径。数字证书中会包含子域名相关的信息。</p>
<h3 id="DNS-域传送漏洞"><a href="#DNS-域传送漏洞" class="headerlink" title="DNS 域传送漏洞"></a>DNS 域传送漏洞</h3><h4 id="什么是DNS"><a href="#什么是DNS" class="headerlink" title="什么是DNS"></a>什么是DNS</h4><p>DNS(Domain Name System，域名管理系统) 是万维网 WWW 的重要基础。它建立在一个分布式数据库基础之上，在这个数据库里，保存了IP地址和域名的相互映射关系。</p>
<p>DNS服务器使用的TCP/UDP端口号是53。</p>
<p>最常用的DNS记录有以下几类：</p>
<table>
<thead>
<tr>
<th>记录类别</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>A记录</td>
<td>IP 地址记录,记录一个域名对应的 IP 地址</td>
</tr>
<tr>
<td>AAAA 记录</td>
<td>IPv6 地址记录，记录一个域名对应的 IPv6 地址</td>
</tr>
<tr>
<td>CNAME 记录</td>
<td>别名记录，记录一个主机的别名</td>
</tr>
<tr>
<td>MX 记录</td>
<td>电子邮件交换记录，记录一个邮件域名对应的IP地址</td>
</tr>
<tr>
<td>NS 记录</td>
<td>域名服务器记录 ,记录该域名由哪台域名服务器解析</td>
</tr>
<tr>
<td>PTR 记录</td>
<td>反向记录，也即从 IP 地址到域名的一条记录</td>
</tr>
<tr>
<td>TXT 记录</td>
<td>记录域名的相关文本信息</td>
</tr>
</tbody>
</table>
<h4 id="nslookup-命令"><a href="#nslookup-命令" class="headerlink" title="nslookup 命令"></a>nslookup 命令</h4><p>nslookup 命令的使用。仅使用该命令，就可完成 DNS 域传送的测试。</p>
<p>指定 DNS 查询域名的 IP 地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~ nslookup www.sqlsec.com 114.114.114.114</span><br><span class="line">Server:        114.114.114.114</span><br><span class="line">Address:    114.114.114.114#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:    www.sqlsec.com</span><br><span class="line">Address: 121.196.37.183</span><br></pre></td></tr></table></figure>
<p>查询域名所使用的 DNS 服务器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ nslookup www.sqlsec.com -type=ns</span><br><span class="line">Server:        100.100.2.136</span><br><span class="line">Address:    100.100.2.136#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:    www.sqlsec.com</span><br><span class="line">Address: 121.196.37.183</span><br></pre></td></tr></table></figure>
<p>验证一下看看，是否这个 DNS 服务器开启了 53 端口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ nmap 100.100.2.136</span><br><span class="line"></span><br><span class="line">Starting Nmap 6.40 ( http://nmap.org ) at 2020-07-25 14:32 CST</span><br><span class="line">Nmap scan report for 100.100.2.136</span><br><span class="line">Host is up (0.00028s latency).</span><br><span class="line">Not shown: 999 filtered ports</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">53/tcp open  domain</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 9.26 seconds</span><br></pre></td></tr></table></figure>
<h4 id="域传送漏洞"><a href="#域传送漏洞" class="headerlink" title="域传送漏洞"></a>域传送漏洞</h4><p>DNS服务器分为：主服务器、备份服务器和缓存服务器。在主备服务器之间同步数据库，需要使用“DNS域传送”。域传送是指备份服务器从主服务器拷贝数据，并用得到的数据更新自身数据库。</p>
<p>若DNS服务器配置不当，可能导致匿名用户获取某个域的所有记录。造成整个网络的拓扑结构泄露给潜在的攻击者，包括一些安全性较低的内部主机，如测试服务器。凭借这份网络蓝图，攻击者可以节省很少的扫描时间。</p>
<p>Nslookup 命令检测：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> # 查询解析此域名的dns服务器</span><br><span class="line">nslookup -type=ns xxx.xxx.cn</span><br><span class="line"></span><br><span class="line"># 进入交互</span><br><span class="line">nslookup  </span><br><span class="line"></span><br><span class="line"># 指定dns服务器</span><br><span class="line">server dns.xxx.xx.cn</span><br><span class="line"></span><br><span class="line"># 列出域信息</span><br><span class="line">ls xxx.xxx.cn</span><br></pre></td></tr></table></figure>
<p>详细案例的输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">D:\&gt;nslookup</span><br><span class="line">默认服务器:  public1.114dns.com</span><br><span class="line">Address:  114.114.114.114</span><br><span class="line"></span><br><span class="line">&gt; server dns.nwpu.edu.cn</span><br><span class="line">默认服务器:  dns.nwpu.edu.cn</span><br><span class="line">Address:  202.117.80.2</span><br><span class="line"></span><br><span class="line">&gt; ls nwpu.edu.cn</span><br><span class="line">[dns.nwpu.edu.cn]</span><br><span class="line"> nwpu.edu.cn.                   NS     server = dns.nwpu.edu.cn</span><br><span class="line"> nwpu.edu.cn.                   NS     server = dns1.nwpu.edu.cn</span><br><span class="line"> nwpu.edu.cn.                   NS     server = dns2.nwpu.edu.cn</span><br><span class="line"> nwpu.edu.cn.                   NS     server = dns3.nwpu.edu.cn</span><br><span class="line"> *                              A      222.24.192.99</span><br><span class="line">(... 省略大量的记录)</span><br><span class="line">npunecas                       NS     server = webcomp.npunecas.nwpu.edu.cn</span><br><span class="line"> webcomp.npunecas               A      202.117.85.146</span><br><span class="line"> nwpu03                         A      202.117.80.4</span><br><span class="line"> nwpudb2                        A      222.24.210.149</span><br><span class="line"> poj                            A      192.168.0.248</span><br><span class="line"> portal                         A      61.150.43.10</span><br><span class="line"> portal1                        A      222.24.192.31</span><br><span class="line"> portal2                        A      222.24.192.32</span><br><span class="line"> rei                            A      202.117.85.10</span><br><span class="line"> saip                           NS     server = saipserver.saip.nwpu.edu.cn</span><br><span class="line"> saipserver.saip                A      202.117.85.72</span><br><span class="line"> test                           A      222.24.192.29</span><br><span class="line"> yzb                            A      202.117.85.3</span><br><span class="line"> zsb                            A      202.117.87.130</span><br><span class="line"> zygx                           A      202.117.80.9</span><br></pre></td></tr></table></figure>
<h2 id="C段与旁站-渐渐没落"><a href="#C段与旁站-渐渐没落" class="headerlink" title="C段与旁站(渐渐没落)"></a>C段与旁站(渐渐没落)</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><h4 id="什么是-IP-地址"><a href="#什么是-IP-地址" class="headerlink" title="什么是 IP 地址"></a>什么是 IP 地址</h4><p>IP 地址在网络中用于标识一个节点（或者网络设备的接口），一个IPv4地址有32位。</p>
<table>
<thead>
<tr>
<th>192.</th>
<th>168.</th>
<th>10.</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>11000000</td>
<td>10101000</td>
<td>00001010</td>
<td>00000001</td>
</tr>
</tbody>
</table>
<p>IP地址在最底层运算的时候依然采用的是二进制的方式。</p>
<h4 id="IP地址的类别"><a href="#IP地址的类别" class="headerlink" title="IP地址的类别"></a>IP地址的类别</h4><p>0.0.0.0 - 255.255.255.255 一共有2的32次方个，因为数量很庞大，所以需要科学的管理。<br>我们一般把IP地址划分为如下5个类别：</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200725110133223.png" alt="image-20200725110133223"></p>
<p>正常可以被我们使用的只有A、B、C类<br>A 类</p>
<ul>
<li>00000001 - 01111111 : 0 - 127<br>0 是不合法的 IP 地址，所以范围从 1 开始，又因为 127 是一个比较特殊的地址，回环地址，所以 A 类的第一个 8 bit 的值范围为 1-126</li>
</ul>
<p>B 类</p>
<ul>
<li><p>10000000 - 10111111 : 128 - 191<br>C 类</p>
</li>
<li><p>11000000 - 11011111 : 192 - 223<br>所以在内网渗透中，遇到 10 开头的 IP 地址，一般我们称呼它为 A 类地址，172 开头的IP地址为 B 类地址，192 开头的IP地址为 C 类地址。</p>
</li>
</ul>
<h4 id="IP-地址的网络和主机部分"><a href="#IP-地址的网络和主机部分" class="headerlink" title="IP 地址的网络和主机部分"></a>IP 地址的网络和主机部分</h4><p>IP 地址和我们实际生活中的地址类似：</p>
<p>浙江省杭州市滨江区西兴街道联慧街188号安恒大厦<br>浙江省 | 杭州市 滨江区 西兴街道联慧街188号<br>网络号 | 主机号<br>所以在网络中间对于转发信息的设备来说，他们不关心主机号，所以路由是不关心主机部分的，先把信息送到目标网络区域，然后交给对于的网络区域的设备来处理。</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200725111813506.png" alt="image-20200725111813506"></p>
<p>所以一个 IP 地址为：10.1.1.1 ，那么 10.0.0.0 为这个 IP 地址的网络号，1.1.1 为这个 IP 地主的主机号。</p>
<h4 id="网络掩码"><a href="#网络掩码" class="headerlink" title="网络掩码"></a>网络掩码</h4><ul>
<li>网络掩码为 32 bits，与 IP 地址的位数是一样的</li>
<li>网络掩码在二进制的表示上是一堆连续的 1 后面接连续的 0</li>
<li>值为 1 的 bit 对应 IP 地址中的网络位；为 0 的 bit 对应 IP 地址中的主机位，以此来辅助我们识别一个 IP 地址中的网络与主机位</li>
</ul>
<p><img src="http://qiniuyun.lintstar.top/20200802010505.png" alt="20200802010505"></p>
<h3 id="A-段-B-段-C-段"><a href="#A-段-B-段-C-段" class="headerlink" title="A 段 B 段 C 段"></a>A 段 B 段 C 段</h3><h4 id="黑客所说的C段是什么意思"><a href="#黑客所说的C段是什么意思" class="headerlink" title="黑客所说的C段是什么意思"></a>黑客所说的C段是什么意思</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.1/24</span><br><span class="line">192.168.1.1 - 192.168.1.255</span><br></pre></td></tr></table></figure>
<p>子网掩码的位数总共有 32 个, /24表示前 24 个为1，其它 8 位都是 0<br>所以 B 段 可以用下面来进行表示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">172.1.1.1/16</span><br><span class="line">172.1.1.1 - 172.1.255.255</span><br></pre></td></tr></table></figure>
<p>A 段 可以用下面来进行表示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10.1.1.1/8</span><br><span class="line">10.1.1.1 - 10.255.255.255</span><br></pre></td></tr></table></figure>
<p>一般渗透测试中常用于 C 段探测，内网中会对 B 段进行探测扫描，A 段资产太庞大，探测成本太高。</p>
<p><strong><code>多地 ping 原理：根据不同地区CDN加速提高响应速度，因此ip会不一样</code></strong></p>
<h3 id="必应接口-没落"><a href="#必应接口-没落" class="headerlink" title="必应接口(没落)"></a>必应接口(没落)</h3><h4 id="在线查询"><a href="#在线查询" class="headerlink" title="在线查询"></a>在线查询</h4><p><strong><a href="http://www.bug8.me/bing/bing.php" target="_blank" rel="noopener">http://www.bug8.me/bing/bing.php</a></strong></p>
<p>在线网站使用必应接口查询 C 段和旁站很方便，但是速度方面有点欠缺</p>
<h4 id="K8-C段旁注工具-6-0"><a href="#K8-C段旁注工具-6-0" class="headerlink" title="K8 C段旁注工具 6.0"></a>K8 C段旁注工具 6.0</h4><p><strong><a href="https://github.com/k8gege/K8tools" target="_blank" rel="noopener">https://github.com/k8gege/K8tools</a></strong></p>
<p>K8 C 段旁注查询工具 V6.0，但是速度要比在线快很多，解压密码为：k8team</p>
<h4 id="爱站"><a href="#爱站" class="headerlink" title="爱站"></a>爱站</h4><p><strong><a href="https://dns.aizhan.com/" target="_blank" rel="noopener">https://dns.aizhan.com/</a></strong></p>
<p>数量上还是比较优势的，而且查询速度也会比较快。</p>
<h4 id="Fofa"><a href="#Fofa" class="headerlink" title="Fofa"></a>Fofa</h4><p>获取到域名的 IP 地址之后，可以使用 Fofa 来反查域名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip=&quot;119.23.84.105&quot; &amp;&amp; type=&quot;subdomain&quot;</span><br></pre></td></tr></table></figure>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><p>更多适用于内网，因为外网基本上开放端口都比较少，而且带云 WAF。</p>
<h4 id="HTTPScan"><a href="#HTTPScan" class="headerlink" title="HTTPScan"></a>HTTPScan</h4><p><strong><a href="https://github.com/zer0h/httpscan" target="_blank" rel="noopener">https://github.com/zer0h/httpscan</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install IPy</span><br><span class="line">python httpscan.py 220.191.202.0/24</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200802083757.png" alt="20200802083757"></p>
<h4 id="http端口查询-标题获取"><a href="#http端口查询-标题获取" class="headerlink" title="http端口查询+标题获取"></a>http端口查询+标题获取</h4><p>首先实用快速端口扫描工具：</p>
<p><img src="http://qiniuyun.lintstar.top/20200802083911.png" alt="20200802083911"></p>
<p>然后提取出ip地址信息，再放到爱站里面取查询，这样可以得出一个最完整的c段信息。</p>
<p>当旁站不是CDN的时候，适用于内网，可以使用批量获取网页标题工具来进行查询：</p>
<p><img src="http://qiniuyun.lintstar.top/1558963651187.png" alt="1558963651187"></p>
<h2 id="服务器信息查询"><a href="#服务器信息查询" class="headerlink" title="服务器信息查询"></a>服务器信息查询</h2><h3 id="CDN-介绍"><a href="#CDN-介绍" class="headerlink" title="CDN 介绍"></a>CDN 介绍</h3><p>CDN（Content Delivery Network，内容分发网络）将源站的内容发布到接近用户的网络“边缘”，用户可以就近获取所需数据，不仅降低了网络的拥塞状况、提高请求的响应速度，也能够减少源站的负载压力。</p>
<p><strong>传统的网络访问过程：</strong></p>
<p><img src="http://qiniuyun.lintstar.top/image-20200725145502796.png" alt="image-20200725145502796"></p>
<p>访问过程大概如下：</p>
<pre><code>1.用户输入访问的域名，操作系统向LocalDNS查询域名的ip地址
2.LocalDns向RootDNS 查询域名的授权服务器
3.RootDNS查询域名记录后，回应给LocalDNS
4.LocalDNS将得到的域名ip地址，回应给客户端
5.用户得到域名ip地址后，访问站点服务器
6.站点服务器应答请求，将内容返回给客户端
</code></pre><p><strong>CDN 访问过程：</strong></p>
<p><img src="http://qiniuyun.lintstar.top/image-20200725145945806.png" alt="image-20200725145945806"></p>
<p>访问过程大概如下：</p>
<pre><code>1.用户输入访问的域名，操作系统向 LocalDns 查询域名的 ip 地址
2.LocalDns 向 ROOT DNS 查询域名的授权服务器
3.ROOT DNS 将域名授权DNS记录回应给 LocalDns
4.LocalDns 得到域名记录后，向智能调度DNS查询域名的ip地址
5.智能调度DNS 根据一定的算法和策略(比如静态拓扑，容量等),将最适合的CDN节点ip地址回应给 LocalDns
6.LocalDns 将得到的域名ip地址，回应给 用户端
7.用户得到域名 ip 地址后，访问站点服务器
8.CDN节点服务器应答请求，将内容返回给客户端
</code></pre><h3 id="CDN-判断与绕过"><a href="#CDN-判断与绕过" class="headerlink" title="CDN 判断与绕过"></a>CDN 判断与绕过</h3><h4 id="ping-命令"><a href="#ping-命令" class="headerlink" title="ping 命令"></a>ping 命令</h4><p>直接 ping 查询地址信息：</p>
<p><img src="http://qiniuyun.lintstar.top/1558999835083.png" alt="1558999835083"></p>
<p>有些是直接可以看到waf、cdn等字样的域名</p>
<p>很多厂商可能让 www 使用cdn，空域名不使用 CDN 缓存。所以直接 ping xxx.com 可能就能得到真实IP</p>
<h4 id="slookup-查询"><a href="#slookup-查询" class="headerlink" title="slookup 查询"></a>slookup 查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 用了 CDN</span><br><span class="line">➜  ~ nslookup www.baidu.com</span><br><span class="line">Server:        10.20.120.150</span><br><span class="line">Address:    10.20.120.150#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.baidu.com    canonical name = www.a.shifen.com.</span><br><span class="line">Name:    www.a.shifen.com</span><br><span class="line">Address: 180.101.49.11</span><br><span class="line">Name:    www.a.shifen.com</span><br><span class="line">Address: 180.101.49.12</span><br><span class="line"></span><br><span class="line"># 没有用 CDN</span><br><span class="line">➜  ~ nslookup www.sqlsec.com</span><br><span class="line">Server:        10.20.120.150</span><br><span class="line">Address:    10.20.120.150#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:    www.sqlsec.com</span><br><span class="line">Address: 121.196.37.183</span><br></pre></td></tr></table></figure>
<p>域名解析结果为多个 ip，多半使用了CDN，是不真实的 ip。</p>
<h4 id="多地-ping"><a href="#多地-ping" class="headerlink" title="多地 ping"></a>多地 ping</h4><ul>
<li>爱站超级 ping: <a href="https://ping.aizhan.com/" target="_blank" rel="noopener">https://ping.aizhan.com/</a></li>
<li>站长之家多地 ping: <a href="http://ping.chinaz.com/" target="_blank" rel="noopener">http://ping.chinaz.com/</a></li>
<li>解析历史记录查询<br>查询<ul>
<li>ip 与域名绑定历史记录，可能会发现使用 CDN 之前的目标 ip。</li>
<li><a href="https://viewdns.info/" target="_blank" rel="noopener">https://viewdns.info/</a></li>
<li><a href="https://x.threatbook.cn/" target="_blank" rel="noopener">https://x.threatbook.cn/</a></li>
<li><a href="https://sitereport.netcraft.com/" target="_blank" rel="noopener">https://sitereport.netcraft.com/</a></li>
</ul>
</li>
</ul>
<h4 id="子域名绕过"><a href="#子域名绕过" class="headerlink" title="子域名绕过"></a>子域名绕过</h4><p>很多网站主站的访问量会比较大。所以往往主站都是挂了CDN的，但是分站就不一定了，毕竟CDN要钱，而且也不便宜,企业业务线众多，有些站点的主站使用了CDN，或者部分域名使用了CDN，某些子域名可能未使用，结合之前的子域名爆破来进行收集。</p>
<h4 id="利用站点功能主动发起请求"><a href="#利用站点功能主动发起请求" class="headerlink" title="利用站点功能主动发起请求"></a>利用站点功能主动发起请求</h4><p>一些网站提供注册服务，可能会验证邮件，还有 RSS 订阅邮件、忘记密码等等 可能服务器本身自带 sendmail 可以直接发送邮件，当然使用第三方的除外（如网易、腾讯的等）通过邮件发送地址往往也能得到服务器 IP</p>
<h4 id="利用网站漏洞"><a href="#利用网站漏洞" class="headerlink" title="利用网站漏洞"></a>利用网站漏洞</h4><p>如果目标站点存在漏洞，这就没办法避免了。例如 phpinfo 敏感信息泄露、Struts2、网页源代码泄露、svn 信息泄露信、Github 信息泄露等</p>
<p>若存在 Web 漏洞，服务器主动与我们发起请求连接，我们也能获取目标站点真实 ip，例如 XSS 等</p>
<h4 id="国外访问"><a href="#国外访问" class="headerlink" title="国外访问"></a>国外访问</h4><p>国内的 CDN 往往只会针对国内用户访问加速，但是国外就不一定了。因此通过国外代理访问就能查看真实 IP 了，或者通过国外的 DNS 解析，可能就能得到真实的 IP</p>
<h2 id="社工信息收集"><a href="#社工信息收集" class="headerlink" title="社工信息收集"></a>社工信息收集</h2><h3 id="whois查询"><a href="#whois查询" class="headerlink" title="whois查询"></a>whois查询</h3><p><strong>whois.bugscaner.com</strong></p>
<p><img src="http://qiniuyun.lintstar.top/20200802084139.png" alt="20200802084139"></p>
<p><strong>whois.aizhan.com</strong></p>
<p><strong>whois.chinaz.com</strong></p>
<h3 id="注册网站查询"><a href="#注册网站查询" class="headerlink" title="注册网站查询"></a>注册网站查询</h3><p><strong><a href="http://www.reg007.com" target="_blank" rel="noopener">www.reg007.com</a></strong></p>
<h3 id="密码泄露查询"><a href="#密码泄露查询" class="headerlink" title="密码泄露查询"></a>密码泄露查询</h3><p><a href="https://haveibeenpwned.com" target="_blank" rel="noopener">https://haveibeenpwned.com</a></p>
<h3 id="TG-群信息收集"><a href="#TG-群信息收集" class="headerlink" title="TG 群信息收集"></a>TG 群信息收集</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">关键词 inurl:t.me</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200801233335.png" alt="20200801233335"></p>
<h3 id="开房记录查询"><a href="#开房记录查询" class="headerlink" title="开房记录查询"></a>开房记录查询</h3><p><a href="http://www.cxjlkf.com" target="_blank" rel="noopener">http://www.cxjlkf.com</a></p>
<h3 id="国家职业资格证查询"><a href="#国家职业资格证查询" class="headerlink" title="国家职业资格证查询"></a>国家职业资格证查询</h3><p><a href="http://zscx.osta.org.cn" target="_blank" rel="noopener">http://zscx.osta.org.cn</a></p>
<h3 id="其他查询"><a href="#其他查询" class="headerlink" title="其他查询"></a>其他查询</h3><h4 id="身份证查询"><a href="#身份证查询" class="headerlink" title="身份证查询"></a>身份证查询</h4><p><a href="http://www.2cha.com" target="_blank" rel="noopener">http://www.2cha.com</a></p>
<h4 id="经纬度查询"><a href="#经纬度查询" class="headerlink" title="经纬度查询"></a>经纬度查询</h4><p><a href="http://www.gpsspg.com/maps.htm" target="_blank" rel="noopener">http://www.gpsspg.com/maps.htm</a></p>
<p><a href="http://map.yanue.net/" target="_blank" rel="noopener">http://map.yanue.net/</a></p>
<p><a href="http://www.gzhatu.com/jingweidu.html" target="_blank" rel="noopener">http://www.gzhatu.com/jingweidu.html</a></p>
<h4 id="微信搜索"><a href="#微信搜索" class="headerlink" title="微信搜索"></a>微信搜索</h4><p><a href="https://weixin.sogou.com" target="_blank" rel="noopener">https://weixin.sogou.com</a></p>
<h4 id="泄露网站查询"><a href="#泄露网站查询" class="headerlink" title="泄露网站查询"></a>泄露网站查询</h4><p><a href="https://haveibeenpwned.com/PwnedWebsites" target="_blank" rel="noopener">https://haveibeenpwned.com/PwnedWebsites</a></p>
<h4 id="邮件泄露查询"><a href="#邮件泄露查询" class="headerlink" title="邮件泄露查询"></a>邮件泄露查询</h4><p><a href="https://www.hotsheet.com/inoitsu/" target="_blank" rel="noopener">https://www.hotsheet.com/inoitsu/</a></p>
<h4 id="密码强度检测"><a href="#密码强度检测" class="headerlink" title="密码强度检测"></a>密码强度检测</h4><p><a href="https://passwordsecurity.info" target="_blank" rel="noopener">https://passwordsecurity.info</a></p>
<p><a href="https://haveibeenpwned.com/Passwords" target="_blank" rel="noopener">https://haveibeenpwned.com/Passwords</a></p>
<h3 id="Github-信息收集"><a href="#Github-信息收集" class="headerlink" title="Github 信息收集"></a>Github 信息收集</h3><p>可以使用谷歌搜索语法：</p>
<p><img src="http://qiniuyun.lintstar.top/20200801230948.png" alt="20200801230948"></p>
<p>也可以使用 Github 自带搜索（推荐）：</p>
<p><img src="http://qiniuyun.lintstar.top/20200801233524.png" alt="20200801233524"></p>
<p>linux密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql数据库</span><br><span class="line">password</span><br><span class="line">db_pass</span><br></pre></td></tr></table></figure>
<p>点code查</p>
<p><img src="http://qiniuyun.lintstar.top/20200802093603.png" alt="20200802093603"></p>
<p><a href="https://github.com/xiao1230546/www.zhanglitong.com/blob/b34e59eb93ad419a216093e1705853f054aea1f0/%E5%B9%B3%E5%8F%B0%E8%B5%84%E6%96%99.txt" target="_blank" rel="noopener">https://github.com/xiao1230546/www.zhanglitong.com/blob/b34e59eb93ad419a216093e1705853f054aea1f0/%E5%B9%B3%E5%8F%B0%E8%B5%84%E6%96%99.txt</a></p>
<h1 id="主动信息收集"><a href="#主动信息收集" class="headerlink" title="主动信息收集"></a>主动信息收集</h1><h2 id="Nmap-与-Masscan"><a href="#Nmap-与-Masscan" class="headerlink" title="Nmap 与 Masscan"></a>Nmap 与 Masscan</h2><h3 id="Nmap-介绍"><a href="#Nmap-介绍" class="headerlink" title="Nmap 介绍"></a>Nmap 介绍</h3><p>官网：<a href="https://nmap.org/" target="_blank" rel="noopener">https://nmap.org/</a></p>
<p>Nmap 的英文全称是“Nmap Network Mapper”，中文翻译过来就是“网络映射器”。 Nmap 是一款开源的端口扫描神器，它可以快速地扫描大型网络也可以扫描单个主机。</p>
<p>端口扫描是指人为发送一组端口扫描信息，试图以了解某台计算机的弱点，并了解其提供的计算机网络服务类型。</p>
<h3 id="端口介绍"><a href="#端口介绍" class="headerlink" title="端口介绍"></a>端口介绍</h3><p>####　TCP 端口</p>
<p>TCP是一种面向有连接的传输协议，只有确认通信对端存在时，才会发送数据，从而可以控制通信流量的浪费。同时，TCP还充分实现数据传输过程中的各种控制，可以再数据丢包 的时候重发，还可以对次序乱掉的分包进行顺序控制。</p>
<h4 id="UDP-端口"><a href="#UDP-端口" class="headerlink" title="UDP 端口"></a>UDP 端口</h4><p>UDP传输不提供复杂的控制机制，它利用IP提供面向无连接的通信服务。UDP报文没有可靠性保证，顺序保证，和流量控制，可靠性比较差，传输过程中即使出现包丢失也不会重发。 也正是因为这些，它的资源消耗小，传输速度快，通常音频，视频在传送时用UDP传输较多。</p>
<h4 id="协议端口"><a href="#协议端口" class="headerlink" title="协议端口"></a>协议端口</h4><p>端口如同是一个房间的门，这个房间有多少个门呢？有65536 个之多，也就是说端口的取值范围是 0~65535 个。本地操作系统会给那些有需求的进程分配协议端口，每个协议端口有一个正整数标识，如 80、139、445 等。</p>
<table>
<thead>
<tr>
<th>端口</th>
<th>协议</th>
</tr>
</thead>
<tbody>
<tr>
<td>21</td>
<td>FTP</td>
</tr>
<tr>
<td>22</td>
<td>SSH</td>
</tr>
<tr>
<td>23</td>
<td>Tenet 服务</td>
</tr>
<tr>
<td>25</td>
<td>SMTP 邮件传输协议</td>
</tr>
<tr>
<td>80</td>
<td>HTTP 服务相关端口</td>
</tr>
<tr>
<td>110</td>
<td>POP3 E-mail</td>
</tr>
<tr>
<td>135</td>
<td>共享文件或共享打印机</td>
</tr>
<tr>
<td>443</td>
<td>HTTP 服务相关常用端口 SSL</td>
</tr>
<tr>
<td>445</td>
<td>文件或打印机共享服务</td>
</tr>
<tr>
<td>1433</td>
<td>MS SQL Server 数据库</td>
</tr>
<tr>
<td>1521</td>
<td>Oracle 数据库</td>
</tr>
<tr>
<td>3306</td>
<td>MySQL 数据库</td>
</tr>
<tr>
<td>3389</td>
<td>Windows 远程桌面服务</td>
</tr>
<tr>
<td>5432/5433</td>
<td>PostgreSQL 数据库端口</td>
</tr>
<tr>
<td>6379</td>
<td>Redis 存储默认端口</td>
</tr>
<tr>
<td>7001</td>
<td>Weblogic 默认端口</td>
</tr>
<tr>
<td>8080</td>
<td>HTTP 服务常用端口</td>
</tr>
<tr>
<td>8000 - 8100</td>
<td>HTTP 服务常用端口</td>
</tr>
<tr>
<td>9200</td>
<td>Elasticsearch 默认端口</td>
</tr>
<tr>
<td>11211</td>
<td>Memcached 分布式缓存系统端口</td>
</tr>
</tbody>
</table>
<h3 id="端口状态"><a href="#端口状态" class="headerlink" title="端口状态"></a>端口状态</h3><p>Nmap 进行端口扫描的时候，Nmap 会把扫描到的端口信息反馈回来，我们从反馈回来的信息就可以判断目标端口情况。</p>
<table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Open</td>
<td>端口对外开放</td>
</tr>
<tr>
<td>Closed</td>
<td>端口对外关闭</td>
</tr>
<tr>
<td>Fitered</td>
<td>无法判断</td>
<td>被防火墙设备拦截过滤</td>
</tr>
<tr>
<td>nfiltered</td>
<td>未被过滤</td>
<td>使用 ACK 扫描才可能出现这种情况</td>
</tr>
<tr>
<td>Open\</td>
<td>Filtered</td>
<td>不能确定开放或者过滤 可能被专业设备阻止探测了</td>
</tr>
<tr>
<td>Closed\</td>
<td>Filtered</td>
<td>不能确定关闭还是被过滤</td>
</tr>
</tbody>
</table>
<h3 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h3><p>本节所用到的 Nmap 命令表：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>-sP</td>
<td>Ping 扫描</td>
</tr>
<tr>
<td>-P0/-Pn</td>
<td>无 Ping 扫描</td>
</tr>
<tr>
<td>-PS</td>
<td>TCP SYN Ping 扫描</td>
</tr>
<tr>
<td>-PA</td>
<td>TCP ACK Ping 扫描</td>
</tr>
<tr>
<td>-PU</td>
<td>UDP Ping 扫描</td>
</tr>
<tr>
<td>-PE;-PP;-PM</td>
<td>ICMP Ping Types 扫描</td>
</tr>
<tr>
<td>-PR</td>
<td>ARP Ping 扫描</td>
</tr>
<tr>
<td>-sL</td>
<td>列表扫描</td>
</tr>
<tr>
<td>-6</td>
<td>扫描 IPv6 地址</td>
</tr>
<tr>
<td>–traceroute</td>
<td>路由跟踪</td>
</tr>
<tr>
<td>-PY</td>
<td>SCTP INIT Ping 扫描</td>
</tr>
</tbody>
</table>
<h3 id="一个简单的扫描"><a href="#一个简单的扫描" class="headerlink" title="一个简单的扫描"></a>一个简单的扫描</h3><p>该扫描方式可以快递地对 IP 或者域名进行扫描：</p>
<p><img src="http://qiniuyun.lintstar.top/20200802095959.png" alt="20200802095959"></p>
<p>可以使用 –packet-trace 查看协议扫描的细节：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 10.11.29.138 --packet-trace</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200802100228.png" alt="20200802100228"></p>
<p>可以使用 -v 查看详细地输出，漫长的扫描的过程就不会显得那么枯燥，而且可以提升逼格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 10.11.29.138 -v</span><br></pre></td></tr></table></figure>
<p>查看Linux源：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200802100851.png" alt="20200802100851"></p>
<p><code>sudo apt-get update</code> 自动使用最近源，指定是多此一举</p>
<p><img src="http://qiniuyun.lintstar.top/20200802101033.png" alt="20200802101033"></p>
<h3 id="使用-Zenmap-进行扫描"><a href="#使用-Zenmap-进行扫描" class="headerlink" title="使用 Zenmap 进行扫描"></a>使用 Zenmap 进行扫描</h3><p>Zenmap 是 Nmap 官方的图形化界面，比较方便初学者使用的同时也提供了很多高级特性。</p>
<h3 id="Ping-扫描"><a href="#Ping-扫描" class="headerlink" title="Ping 扫描"></a>Ping 扫描</h3><p>Ping 扫描只进行 Ping，然后显示出在线的主机，可以比较快速地获取目标信息而不会被轻易发现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">nmap 10.20.24.1/24 -sP</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 14:59 CST</span><br><span class="line">Nmap scan report for 10.20.24.15</span><br><span class="line">Host is up (0.016s latency).</span><br><span class="line">Nmap scan report for 10.20.24.231</span><br><span class="line">Host is up (0.0021s latency).</span><br><span class="line">Nmap scan report for 10.20.24.236</span><br><span class="line">Host is up (0.00068s latency).</span><br><span class="line">Nmap scan report for 10.20.24.238</span><br><span class="line">Host is up (0.0019s latency).</span><br><span class="line">Nmap scan report for 10.20.24.239</span><br><span class="line">Host is up (0.0018s latency).</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00087s latency).</span><br><span class="line">Nmap done: 256 IP addresses (6 hosts up) scanned in 3.36 seconds</span><br></pre></td></tr></table></figure>
<p>也可以直接使用 Ping 命令来发现局域网主机：</p>
<ul>
<li>Linux 主机</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">ip=&quot;172.16.114.&quot;</span><br><span class="line"></span><br><span class="line">echo &quot;ping log:&quot; &gt; ./ping.txt</span><br><span class="line">for i in &#123;1..254&#125;</span><br><span class="line">do</span><br><span class="line">    ping -c 1 -w 1 -W 1 $ip$i | grep -q &quot;ttl=&quot; &amp;&amp; echo &quot;$ip$i [yes]&quot; &gt;&gt; ./ping.txt || echo &quot;$ip$i [no]&quot; &gt;&gt; ./ping.txt &amp;</span><br><span class="line">done</span><br><span class="line">echo &quot;wait 5s....&quot;</span><br><span class="line">sleep 5</span><br><span class="line">cat ./ping.txt</span><br><span class="line">cat ./ping.txt | wc -l</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200802101438.png" alt="20200802101438"></p>
<p><img src="http://qiniuyun.lintstar.top/20200802101517.png" alt="20200802101517"></p>
<ul>
<li>Windows 主机</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for /l %p in (1,1,254) do @ping 10.20.24.%p -n 1 -l 16 -w 20 |find &quot;TTL=&quot; /I</span><br></pre></td></tr></table></figure>
<h3 id="无-Ping-扫描"><a href="#无-Ping-扫描" class="headerlink" title="无 Ping 扫描"></a>无 Ping 扫描</h3><p>用户防火墙禁止 Ping 的情况下，可以使用 -P0 或者 -Pn可以避免被防火墙发现。</p>
<p><code>nmap无法突破windows防火墙，但是内网中很多域为方便都是不开防火墙的，所以nmap依旧吃香。</code></p>
<p><img src="http://qiniuyun.lintstar.top/20200802095420.png" alt="20200802095420"></p>
<p>开防火墙后扫描3306（已知开放）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 10.11.29.138 -p 3306 -Pn</span><br></pre></td></tr></table></figure>
<p><img src="http://qiniuyun.lintstar.top/20200802095640.png" alt="20200802095640"></p>
<h3 id="TCP-SYN-Ping-扫描"><a href="#TCP-SYN-Ping-扫描" class="headerlink" title="TCP SYN Ping 扫描"></a>TCP SYN Ping 扫描</h3><p>通常情况下，Nmap 默认 Ping 扫描是使用 TCP ACK 和 ICMP Echo 请求对目标进行是否存活的响应，当目标主机的防火墙阻止这些请求时，我们可以使用 TCP SYN Ping 扫描来对目标主机进行存活判断：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nmap 10.20.24.244 -PS</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 16:54 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00014s latency).</span><br><span class="line">Not shown: 997 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">88/tcp   open  kerberos-sec</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<p>有时候这种扫描结果不不准确，这个时候需要制定一个端口或端口范围来避免这种情况。</p>
<h3 id="TCP-ACK-Ping-扫描"><a href="#TCP-ACK-Ping-扫描" class="headerlink" title="TCP ACK Ping 扫描"></a>TCP ACK Ping 扫描</h3><p>使用 -PA选项可以进行 TCP ACK Ping 扫描，它与 TCP SYN Ping 扫描比较类似，区别在于 TCP 的标志位是 ACK 而不是 SYN，使用这种方式可以探测阻止 SYN 包或 ICMP Echo 请求的主机。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap 10.20.24.244 -PA</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 17:02 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.0014s latency).</span><br><span class="line">Not shown: 743 closed ports, 254 filtered ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">88/tcp   open  kerberos-sec</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<p>也可以同时使用-PS与-PA 既发送 SYN 又发送 ACK，提高通过防火墙的概率：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap 10.20.24.244 -PS -PA</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 17:03 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00040s latency).</span><br><span class="line">Not shown: 997 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">88/tcp   open  kerberos-sec</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<h3 id="UDP-Ping-扫描"><a href="#UDP-Ping-扫描" class="headerlink" title="UDP Ping 扫描"></a>UDP Ping 扫描</h3><p>需要使用 root 权限来运行，使用 -PU 选项可以发送一个空的冷门的 UDP 报文到指定端口，如果目标主机响应则返回一个 ICMP 端口不可达错误，如果目标主机不是存活状态则会返回各种 ICMP 错误信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap 10.20.24.244 -PU</span><br><span class="line">Password:</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 17:07 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00012s latency).</span><br><span class="line">Not shown: 997 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">88/tcp   open  kerberos-sec</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<p>尝试手动来验证看看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap 10.20.24.244 -PU --packet-trace |grep 5900</span><br></pre></td></tr></table></figure>
<h3 id="CMP-Ping-Types-扫描"><a href="#CMP-Ping-Types-扫描" class="headerlink" title="CMP Ping Types 扫描"></a>CMP Ping Types 扫描</h3><p>使用-PE、-PP、-PM选项可以进行 ICMP Ping Types 扫描。ICMP（Internet Control Message Protocol）是 Internet 控制报文协议。是 TCP/IP 协议族的一个子协议，用于在 IP 主机、路由器之间传递控制消息，控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。</p>
<h4 id="ICMP-Echo-扫描"><a href="#ICMP-Echo-扫描" class="headerlink" title="ICMP Echo 扫描"></a>ICMP Echo 扫描</h4><p>-PE 选项可以发起一个 ICMP Echo 扫描来探测目标主机是否在线，因为很多主机的防火墙会禁止这些报文，所以外网扫描基本上不好用，可以用于内网扫描。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap 10.20.24.244 -PE</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 18:34 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00014s latency).</span><br><span class="line">Not shown: 998 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<h4 id="ICMP-时间戳-Ping-扫描"><a href="#ICMP-时间戳-Ping-扫描" class="headerlink" title="ICMP 时间戳 Ping 扫描"></a>ICMP 时间戳 Ping 扫描</h4><p>大多数防火墙可能不允许 ICMP Echo 请求，但是由于配置不当可能回复 ICMP 时间错请求，所以可以使用 -PP 时间戳扫描来确定目标主机是否存活。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap 10.20.24.244 -PP</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 18:34 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.000029s latency).</span><br><span class="line">Not shown: 809 closed ports, 189 filtered ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<h4 id="ICMP-地址掩码-Ping-扫描"><a href="#ICMP-地址掩码-Ping-扫描" class="headerlink" title="ICMP 地址掩码 Ping 扫描"></a>ICMP 地址掩码 Ping 扫描</h4><p>这种扫描方式会试图用备选的 ICMP 登记 Ping 指定主机，通常有不错的穿透防火墙的效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap 10.20.24.244 -PM</span><br><span class="line">Password:</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:05 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00011s latency).</span><br><span class="line">Not shown: 998 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<h3 id="ARP-Ping-扫描"><a href="#ARP-Ping-扫描" class="headerlink" title="ARP Ping 扫描"></a>ARP Ping 扫描</h3><p>-PR选项通常在扫描局域网时使用，ARP（Address Resolution Protocol）地址解析协议，是根据 IP 地址获取物理地址的一个 TCP/IP 协议，在内网中使用 ARP Ping 扫描方式比较搞笑，在本地局域网中防火墙基本上不会禁止 ARP 请求，所以比其他 Ping 扫描效率都更高。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap 10.20.24.244 -PR</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:10 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.0014s latency).</span><br><span class="line">Not shown: 746 closed ports, 252 filtered ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 2.64 seconds</span><br><span class="line">➜  ~ nmap 10.20.24.244</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:11 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00026s latency).</span><br><span class="line">Not shown: 998 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">4000/tcp open  remoteanything</span><br><span class="line">5900/tcp open  vnc</span><br><span class="line"></span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 7.73 seconds</span><br></pre></td></tr></table></figure>
<h3 id="扫描列表"><a href="#扫描列表" class="headerlink" title="扫描列表"></a>扫描列表</h3><p>显示扫描的所有主机的列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap 10.20.24.10-20 -sL</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:19 CST</span><br><span class="line">Nmap scan report for 10.20.24.10</span><br><span class="line">Nmap scan report for 10.20.24.11</span><br><span class="line">Nmap scan report for 10.20.24.12</span><br><span class="line">Nmap scan report for 10.20.24.13</span><br><span class="line">Nmap scan report for 10.20.24.14</span><br><span class="line">Nmap scan report for 10.20.24.15</span><br><span class="line">Nmap scan report for 10.20.24.16</span><br><span class="line">Nmap scan report for 10.20.24.17</span><br><span class="line">Nmap scan report for 10.20.24.18</span><br><span class="line">Nmap scan report for 10.20.24.19</span><br><span class="line">Nmap scan report for 10.20.24.20</span><br><span class="line">Nmap done: 11 IP addresses (0 hosts up) scanned in 0.01 seconds</span><br></pre></td></tr></table></figure>
<p>可以使用 Masscan 批量生成 IP 地址表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">masscan -sL 10.0.0.0/24 &gt; c段.txt</span><br><span class="line">masscan -sL 10.0.0.0/16 &gt; b段.txt</span><br><span class="line">masscan -sL 10.0.0.0/8  &gt; a段.txt</span><br></pre></td></tr></table></figure>
<h3 id="扫描一个-IPv6-地址"><a href="#扫描一个-IPv6-地址" class="headerlink" title="扫描一个 IPv6 地址"></a>扫描一个 IPv6 地址</h3><p>IPv6 是 Internet Protocol Version 6 的缩写，用于替代现在用的 IPv4 的下一代 IP 协议，Nmap 很早就支持对 IPv6 的扫描，使用 -6 选项就可以进行对 IPv6 的扫描。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap -6 1::224:11c</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:34 CST</span><br><span class="line">Nmap scan report for 1::224:11c</span><br><span class="line">Host is up (0.00028s latency).</span><br><span class="line">Not shown: 968 closed ports, 30 filtered ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">88/tcp   open  kerberos-sec</span><br><span class="line">5900/tcp open  vnc</span><br></pre></td></tr></table></figure>
<h3 id="路由跟踪"><a href="#路由跟踪" class="headerlink" title="路由跟踪"></a>路由跟踪</h3><p>使用 –traceroute 可以轻松地查出从本地计算机到目标之间所经过的网络节点，并可以查看过各个节点的时间：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap www.sqlsec.com --traceroute</span><br><span class="line">Password:</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:35 CST</span><br><span class="line">Nmap scan report for www.sqlsec.com (121.196.37.183)</span><br><span class="line">Host is up (0.0018s latency).</span><br><span class="line">Not shown: 991 closed ports</span><br><span class="line">PORT     STATE    SERVICE</span><br><span class="line">21/tcp   open     ftp</span><br><span class="line">22/tcp   open     ssh</span><br><span class="line">80/tcp   open     http</span><br><span class="line">111/tcp  open     rpcbind</span><br><span class="line">443/tcp  open     https</span><br><span class="line">445/tcp  filtered microsoft-ds</span><br><span class="line">888/tcp  open     accessbuilder</span><br><span class="line">3306/tcp open     mysql</span><br><span class="line">4444/tcp filtered krb524</span><br><span class="line"></span><br><span class="line">TRACEROUTE (using port 3389/tcp)</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   1.41 ms 10.20.24.1</span><br><span class="line">2   0.38 ms 172.16.0.1</span><br><span class="line">3   6.50 ms 61.164.47.193</span><br><span class="line">4   ...</span><br><span class="line">5   1.70 ms 61.164.31.218</span><br><span class="line">6   2.51 ms 115.236.101.73</span><br><span class="line">7   1.78 ms 45.112.223.29</span><br><span class="line">8   1.92 ms 103.41.142.173</span><br><span class="line">9   ... 10</span><br><span class="line">11  1.77 ms 121.196.37.183</span><br></pre></td></tr></table></figure>
<h3 id="SCTP-INIT-Ping-扫描"><a href="#SCTP-INIT-Ping-扫描" class="headerlink" title="SCTP INIT Ping 扫描"></a>SCTP INIT Ping 扫描</h3><p>SCTP（Stream Control Transmission Protocol，流控制传输协议）是在 2000 年定义的一个传输层，SCTP 可以看作是 TCP 协议的改进。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap 10.20.24.15 -PY</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 19:40 CST</span><br><span class="line">Nmap scan report for 10.20.24.15</span><br><span class="line">Host is up (0.0071s latency).</span><br><span class="line">Not shown: 996 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">199/tcp  open  smux</span><br><span class="line">443/tcp  open  https</span><br><span class="line">8888/tcp open  sun-answerbook</span><br></pre></td></tr></table></figure>
<h3 id="探索网络"><a href="#探索网络" class="headerlink" title="探索网络"></a>探索网络</h3><p>本节所用到的 Nmap 命令表：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>-T</td>
<td>指定时间模板</td>
</tr>
<tr>
<td>-p</td>
<td>指定端口</td>
</tr>
<tr>
<td>-sS</td>
<td>TCP SYN 扫描</td>
</tr>
<tr>
<td>-sU</td>
<td>UDP 扫描</td>
</tr>
<tr>
<td>-sN;-sF;-sX</td>
<td>隐蔽扫描</td>
</tr>
<tr>
<td>-sA</td>
<td>TCP ACK 扫描</td>
</tr>
<tr>
<td>-sW</td>
<td>TCP 窗口扫描</td>
</tr>
</tbody>
</table>
<h3 id="时间模板"><a href="#时间模板" class="headerlink" title="时间模板"></a>时间模板</h3><p>在 Nmap 提供了一些简单的方法，使用 6 个时间模板，使用时采用 -T 选项及数字 (0 - 5) 或名称。模板名称有paranoid (0)、sneaky (1)、polite (2)、normal(3)、 aggressive (4)和insane (5)</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-T0 偏执的</td>
<td>非常慢，用于 IDS 躲避</td>
</tr>
<tr>
<td>-T1 鬼祟的</td>
<td>缓慢的扫描，用于 IDS 躲避</td>
</tr>
<tr>
<td>-T2 文雅的</td>
<td>降低了扫描速度以使用更少的带宽和目标主机资源</td>
</tr>
<tr>
<td>-T3 普通的</td>
<td>默认模式 根据目标的反应自动调整时间</td>
</tr>
<tr>
<td>-T4 野蛮的</td>
<td>假设用户具有可靠的网络从而加速扫描，可能会漏扫</td>
</tr>
<tr>
<td>-T5 疯狂的</td>
<td>极速扫描，为了获得速度而牺牲准确性</td>
</tr>
</tbody>
</table>
<h3 id="指定端口"><a href="#指定端口" class="headerlink" title="指定端口"></a>指定端口</h3><p>可以指定端口号进行扫描，可以是一个端口也可以是一个范围：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ nmap 10.20.24.1/24 -p 22</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 20:34 CST</span><br><span class="line">Nmap scan report for 10.20.24.15</span><br><span class="line">Host is up (0.0077s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line"></span><br><span class="line">Nmap scan report for 10.20.24.231</span><br><span class="line">Host is up (0.00050s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line"></span><br><span class="line">Nmap scan report for 10.20.24.236</span><br><span class="line">Host is up (0.00051s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line"></span><br><span class="line">Nmap scan report for 10.20.24.238</span><br><span class="line">Host is up (0.00061s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE  SERVICE</span><br><span class="line">22/tcp closed ssh</span><br><span class="line"></span><br><span class="line">Nmap scan report for 10.20.24.239</span><br><span class="line">Host is up (0.00070s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">22/tcp open  ssh</span><br><span class="line"></span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.0019s latency).</span><br><span class="line"></span><br><span class="line">PORT   STATE  SERVICE</span><br><span class="line">22/tcp closed ssh</span><br></pre></td></tr></table></figure>
<h3 id="TCP-SYN-扫描"><a href="#TCP-SYN-扫描" class="headerlink" title="TCP SYN 扫描"></a>TCP SYN 扫描</h3><p>比较常用的扫描方式，也被称为半开放扫描，因为不用进行 TCP 连接 3 次握手，所以速度比较快，平均一秒可以扫描上千个端口，而且相对来说也比较隐蔽，很难被防火墙或管理员发现，因为不会进行 TCP 连接，如果出现被过滤的情况，可以考虑使用 SYN 扫描，可以很明确地区分出端口的开放状态。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo nmap 10.20.24.15 -sS</span><br><span class="line">Password:</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 20:41 CST</span><br><span class="line">Nmap scan report for 10.20.24.15</span><br><span class="line">Host is up (0.0071s latency).</span><br><span class="line">Not shown: 996 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">22/tcp   open  ssh</span><br><span class="line">199/tcp  open  smux</span><br><span class="line">443/tcp  open  https</span><br><span class="line">8888/tcp open  sun-answerbook</span><br></pre></td></tr></table></figure>
<h3 id="TCP-连接扫描"><a href="#TCP-连接扫描" class="headerlink" title="TCP 连接扫描"></a>TCP 连接扫描</h3><p>当 -sS 不能使用的时候，可以使用 -sT 更加基础、稳定的扫描方式。</p>
<h3 id="UDP-扫描"><a href="#UDP-扫描" class="headerlink" title="UDP 扫描"></a>UDP 扫描</h3><p>因为要等待目标主机响应，所以速度比较慢，一般配合 -p 指定端口来使用，否则很耗费时间。</p>
<h3 id="隐蔽扫描"><a href="#隐蔽扫描" class="headerlink" title="隐蔽扫描"></a>隐蔽扫描</h3><ul>
<li>-sN Null 扫描</li>
<li>-sF FIN 扫描</li>
<li>-sX Xmas 扫描<br>这些扫描方式会躲过一些无状态防火墙的过滤，效果会更隐蔽。</li>
</ul>
<h3 id="TCP-ACK-扫描"><a href="#TCP-ACK-扫描" class="headerlink" title="TCP ACK 扫描"></a>TCP ACK 扫描</h3><p>确定是无法判断端口是开放还是过滤的。unfiltered 表明 ACK 报文不能到达，filtered 表示不响应的端口。</p>
<h3 id="TCP-窗口扫描"><a href="#TCP-窗口扫描" class="headerlink" title="TCP 窗口扫描"></a>TCP 窗口扫描</h3><p>类似于ACK 扫描，通过返回的窗口大小数据判断目标端口是否开放或者关闭。扫描结果是不准确的，如果 100 个端口里面只有 2 个关闭的，那很可能是开放的。</p>
<h3 id="指纹探测"><a href="#指纹探测" class="headerlink" title="指纹探测"></a>指纹探测</h3><p>Nmap 不仅是一款端口扫描工具，还可以对主机的服务及版本进行识别和探测。</p>
<p>本节所使用的命令表：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-sV</td>
<td>版本探测</td>
</tr>
<tr>
<td>-A</td>
<td>更加详细直观的扫描</td>
</tr>
<tr>
<td>–version-intensity</td>
<td>设置扫描强度 1~9 默认为 7</td>
</tr>
<tr>
<td>–version-light</td>
<td>轻量级扫描 强度为 2</td>
</tr>
<tr>
<td>–version-all</td>
<td>重量级扫描 强度为 9</td>
</tr>
<tr>
<td>-O</td>
<td>启用操作系统探测</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"># 版本探测</span><br><span class="line">➜  ~ nmap 10.20.24.244 -sV</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 21:12 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.30s latency).</span><br><span class="line">Not shown: 999 closed ports</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">5900/tcp open  vnc     Apple remote desktop vnc</span><br><span class="line">Service Info: OS: Mac OS X; CPE: cpe:/o:apple:mac_os_x</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 6.98 seconds</span><br><span class="line"></span><br><span class="line">  ~ nmap 10.20.24.244 -A</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 21:13 CST</span><br><span class="line">Nmap scan report for 10.20.24.244</span><br><span class="line">Host is up (0.00026s latency).</span><br><span class="line">Not shown: 999 closed ports</span><br><span class="line">PORT     STATE SERVICE VERSION</span><br><span class="line">5900/tcp open  vnc     Apple remote desktop vnc</span><br><span class="line">|_ssl-cert: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">|_ssl-date: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">|_sslv2: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">|_tls-alpn: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">|_tls-nextprotoneg: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">|_vnc-info: ERROR: Script execution failed (use -d to debug)</span><br><span class="line">Service Info: OS: Mac OS X; CPE: cpe:/o:apple:mac_os_x</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 7.81 seconds</span><br><span class="line"></span><br><span class="line"># 操作系统探测</span><br><span class="line">➜  ~ sudo nmap 10.211.55.17 -O</span><br><span class="line">Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-26 21:25 CST</span><br><span class="line">Nmap scan report for windows-7-1.shared (10.211.55.17)</span><br><span class="line">Host is up (0.00015s latency).</span><br><span class="line">Not shown: 991 closed ports</span><br><span class="line">PORT      STATE SERVICE</span><br><span class="line">135/tcp   open  msrpc</span><br><span class="line">139/tcp   open  netbios-ssn</span><br><span class="line">445/tcp   open  microsoft-ds</span><br><span class="line">49152/tcp open  unknown</span><br><span class="line">49153/tcp open  unknown</span><br><span class="line">49154/tcp open  unknown</span><br><span class="line">49155/tcp open  unknown</span><br><span class="line">49156/tcp open  unknown</span><br><span class="line">49158/tcp open  unknown</span><br><span class="line">MAC Address: 00:1C:42:86:1B:DE (Parallels)</span><br><span class="line">Device type: general purpose</span><br><span class="line">Running: Microsoft Windows 7|2008|8.1</span><br><span class="line">OS CPE: cpe:/o:microsoft:windows_7::- cpe:/o:microsoft:windows_7::sp1 cpe:/o:microsoft:windows_server_2008::sp1 cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_8.1</span><br><span class="line">OS details: Microsoft Windows 7 SP0 - SP1, Windows Server 2008 SP1, Windows Server 2008 R2, Windows 8, or Windows 8.1 Update 1</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line"></span><br><span class="line">OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 3.54 seconds</span><br></pre></td></tr></table></figure>
<h3 id="保存输出"><a href="#保存输出" class="headerlink" title="保存输出"></a>保存输出</h3><table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-oN</td>
<td>标准保存</td>
</tr>
<tr>
<td>-oX</td>
<td>XML 保存</td>
</tr>
</tbody>
</table>
<p><img src="http://qiniuyun.lintstar.top/20200802104146.png" alt="20200802104146"></p>
<p><code>快速找到.xml文件中的ip: VSCode ctrl + f 用最右面正则表达式搜索</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((2(5[0-5]|[0-4]\d))|[0-1]?\d&#123;1,2&#125;)(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d&#123;1,2&#125;))&#123;3&#125;</span><br></pre></td></tr></table></figure>
<p>Ctrl + Shift + L 选择所有出现在当前选中的行</p>
<p>VSCode 批量处理ip格式问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">开头标记：^  换成 http://</span><br><span class="line">结尾标记：$  换成 :8080</span><br><span class="line">全选后再替换</span><br></pre></td></tr></table></figure>
<h3 id="Masscan"><a href="#Masscan" class="headerlink" title="Masscan"></a>Masscan</h3><p>项目地址：<a href="https://github.com/robertdavidgraham/masscan" target="_blank" rel="noopener">https://github.com/robertdavidgraham/masscan</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 扫描整个互联网</span><br><span class="line">masscan 0.0.0.0/0 -p0-65535</span><br><span class="line"></span><br><span class="line"># 输出到文件中</span><br><span class="line">masscan 0.0.0.0/0 -p0-65535 -oX scan.xml</span><br><span class="line"></span><br><span class="line"># 默认的速率100包/秒，如果是扫描全网的话，需要提高速度。</span><br><span class="line">masscan 0.0.0.0/0 -p0-65535 --rate 100000 -oX scan.xml</span><br></pre></td></tr></table></figure>
<p>实用正则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 正则</span><br><span class="line">((2(5[0-5]|[0-4]\d))|[0-1]?\d&#123;1,2&#125;)(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d&#123;1,2&#125;))&#123;3&#125;</span><br><span class="line"></span><br><span class="line"># 换行</span><br><span class="line">^\s*(?=\r?$)\n</span><br></pre></td></tr></table></figure>
<h2 id="漏洞扫描工具"><a href="#漏洞扫描工具" class="headerlink" title="漏洞扫描工具"></a>漏洞扫描工具</h2><p>市面上也有很多各种各样的开源、商业扫描器。单就应用这一层来说，漏洞扫描器一般分为主动扫描和被动扫描两种。</p>
<ul>
<li><p>主动扫描<br>主动扫描一般用于黑盒测试，其形式为提供一个URL入口地址，然后由扫描器中的爬虫模块爬取所有链接，对GET、POST等请求进行参数变形和污染，进行重放测试，然后依据返回信息中的状态码、数据大小、数据内容关键字等去判断该请求是否含有相应的漏洞。例如：AWVS、Nessus、唐朝扫描器、BugScan、Pocsuite</p>
</li>
<li><p>被动扫描<br>被动扫描，与主动扫描相比，被动扫描并不进行大规模的爬虫爬取行为，而是直接通过捕获测试人员的测试请求，直接进行参数变形和污染来测试服务端的漏洞，如果通过响应信息能够判断出漏洞存在，则进行记录管理，有人工再去进行漏洞的复现和确认。例如：BurpSuite、Xray</p>
</li>
</ul>
<p>主动扫描与被动扫描最主要的区别为被动式扫描器不主动获取站点链接，而是通过流量、获取测试人员的访问请求等手段去采集数据源，然后进行类似的安全检测。</p>
<p><strong>主动扫描的 Web 扫描器的一些不足：</strong></p>
<p>由于数据源来自爬虫爬取，独立的页面、API接口等就无法覆盖，存在检测遗漏情况。</p>
<p>果是扫描单独的几个站点，主动扫描是够用的。但是在站点数量急剧增大的时候，主动扫描的效率、精准、速度都无法与被动扫描相比。</p>
<h2 id="AWVS"><a href="#AWVS" class="headerlink" title="AWVS"></a>AWVS</h2><p><img src="http://qiniuyun.lintstar.top/20200802112732.png" alt="20200802112732"></p>
<p>Acunetix Web Vulnerability Scanner（简称AWVS）是一款知名的网络漏洞扫描工具，它通过网络爬虫测试你的网站安全，检测流行安全漏洞。AWVS可以检查SQL注入漏洞，也可以检查跨站脚本攻击漏洞，可以扫描任何可以通过web浏览访问和遵循HTTP/HTTPS规则的 Web 站点和 Web应用程序。</p>
<p><strong>黑科技：</strong></p>
<p><img src="http://qiniuyun.lintstar.top/20200802113100.png" alt="20200802113100"></p>
<p>扫描过程：</p>
<p><img src="http://qiniuyun.lintstar.top/20200802114217.png" alt="20200802114217"></p>
<h2 id="Nessus-主机漏洞扫描"><a href="#Nessus-主机漏洞扫描" class="headerlink" title="Nessus 主机漏洞扫描"></a>Nessus 主机漏洞扫描</h2><p><img src="http://qiniuyun.lintstar.top/image-20200727154132756.png" alt="image-20200727154132756"></p>
<p>Nessus 在全世界有超过 75000 个组织在使用它。该工具提供完整的电脑漏洞扫描服务，并随时更新其漏洞数据库。Nessus 不同于传统的漏洞扫描软件，支持分布式扫描。</p>
<p>Linux下 Nessus 常用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nessusd # 查看运行状态</span><br><span class="line">systemctl start nessusd  # 启动 nessus</span><br><span class="line">systemctl stop nessusd   # 停止 nessus</span><br><span class="line">systemctl restart nessusd# 重启 nessus</span><br><span class="line">systemctl enable nessusd # 开机自启</span><br><span class="line">systemctl disable nessusd# 关闭开机自启</span><br><span class="line">systemctl kill nessusd   # 杀死 nessus 的子进程</span><br></pre></td></tr></table></figure>
<h3 id="基本网络扫描"><a href="#基本网络扫描" class="headerlink" title="基本网络扫描"></a>基本网络扫描</h3><p>多用于进行主机扫描测试，可以扫描系统层面的漏洞：</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200727155401167.png" alt="image-20200727155401167"></p>
<h3 id="Web-应用测试"><a href="#Web-应用测试" class="headerlink" title="Web 应用测试"></a>Web 应用测试</h3><p>也可以类型 AWVS 那样对 Web 应用进行测试：</p>
<p><img src="http://qiniuyun.lintstar.top/image-20200727202443406.png" alt="image-20200727202443406"></p>
<h2 id="Xray"><a href="#Xray" class="headerlink" title="Xray"></a>Xray</h2><p><img src="http://qiniuyun.lintstar.top/1586916483667.png" alt="1586916483667"></p>
<p><strong>项目地址:<a href="https://github.com/chaitin/xray" target="_blank" rel="noopener">https://github.com/chaitin/xray</a></strong></p>
<p>长亭科技研发的一款完善的安全评估工具，支持常见Web安全问题扫描和自定义POC，虽然Github有项目，但是不开源，只提供社区版本供大家使用。</p>
<p>转载：<a href="https://www.sqlsec.com/2020/04/xray.html" target="_blank" rel="noopener">https://www.sqlsec.com/2020/04/xray.html</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Web/" rel="tag"><i class="fa fa-tag"></i> Web</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/note/2020/undefined01/35d3b1d4.html" rel="next" title="渗透测试基础">
                <i class="fa fa-chevron-left"></i> 渗透测试基础
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/note/2020/undefined03/e9e5edd8.html" rel="prev" title="身份认证技术">
                身份认证技术 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="离沫凌天๓">
            
              <p class="site-author-name" itemprop="name">离沫凌天๓</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#信息收集技术"><span class="nav-number">1.</span> <span class="nav-text">信息收集技术</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#信息收集介绍"><span class="nav-number">1.1.</span> <span class="nav-text">信息收集介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常规收集"><span class="nav-number">1.1.1.</span> <span class="nav-text">常规收集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从信息泄露到未授权访问"><span class="nav-number">1.1.2.</span> <span class="nav-text">从信息泄露到未授权访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内网收集"><span class="nav-number">1.1.3.</span> <span class="nav-text">内网收集</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#被动信息收集（OSINT）"><span class="nav-number">2.</span> <span class="nav-text">被动信息收集（OSINT）</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Google-Hack"><span class="nav-number">2.1.</span> <span class="nav-text">Google Hack</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#默认搜索"><span class="nav-number">2.1.1.</span> <span class="nav-text">默认搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通配符"><span class="nav-number">2.1.2.</span> <span class="nav-text">通配符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑非"><span class="nav-number">2.1.3.</span> <span class="nav-text">逻辑非</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用关键词"><span class="nav-number">2.1.4.</span> <span class="nav-text">常用关键词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常见后台查找"><span class="nav-number">2.1.5.</span> <span class="nav-text">常见后台查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实际演示"><span class="nav-number">2.1.6.</span> <span class="nav-text">实际演示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索南京政府的子域名信息"><span class="nav-number">2.1.6.1.</span> <span class="nav-text">搜索南京政府的子域名信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索互联网上的登录入口"><span class="nav-number">2.1.6.2.</span> <span class="nav-text">搜索互联网上的登录入口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索百度的相关登录入口"><span class="nav-number">2.1.6.3.</span> <span class="nav-text">搜索百度的相关登录入口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查找互联网敏感文件"><span class="nav-number">2.1.6.4.</span> <span class="nav-text">查找互联网敏感文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查找被黑政府站点"><span class="nav-number">2.1.6.5.</span> <span class="nav-text">查找被黑政府站点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#物联网搜索引擎"><span class="nav-number">2.2.</span> <span class="nav-text">物联网搜索引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Shodan"><span class="nav-number">2.2.1.</span> <span class="nav-text">Shodan</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本语法"><span class="nav-number">2.2.2.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实际操作"><span class="nav-number">2.2.3.</span> <span class="nav-text">实际操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#查找位于国内的-Nginx-服务器"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">查找位于国内的 Nginx 服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索位南京开启-3389-端口的服务器"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">搜索位南京开启 3389 端口的服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索海康威视摄像头"><span class="nav-number">2.2.3.3.</span> <span class="nav-text">搜索海康威视摄像头</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看Cisco思科设备全球分布"><span class="nav-number">2.2.3.4.</span> <span class="nav-text">查看Cisco思科设备全球分布</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看华为设备全球分布"><span class="nav-number">2.2.3.5.</span> <span class="nav-text">查看华为设备全球分布</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实用技巧"><span class="nav-number">2.2.4.</span> <span class="nav-text">实用技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Zoomeye"><span class="nav-number">2.2.5.</span> <span class="nav-text">Zoomeye</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主机搜索"><span class="nav-number">2.2.6.</span> <span class="nav-text">主机搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#组件名称"><span class="nav-number">2.2.6.1.</span> <span class="nav-text">组件名称</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#端口"><span class="nav-number">2.2.6.2.</span> <span class="nav-text">端口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作系统"><span class="nav-number">2.2.6.3.</span> <span class="nav-text">操作系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#服务"><span class="nav-number">2.2.6.4.</span> <span class="nav-text">服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主机名"><span class="nav-number">2.2.6.5.</span> <span class="nav-text">主机名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位置"><span class="nav-number">2.2.6.6.</span> <span class="nav-text">位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP-地址"><span class="nav-number">2.2.6.7.</span> <span class="nav-text">IP 地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CIDR"><span class="nav-number">2.2.6.8.</span> <span class="nav-text">CIDR</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web应用搜索"><span class="nav-number">2.2.7.</span> <span class="nav-text">Web应用搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网站"><span class="nav-number">2.2.7.1.</span> <span class="nav-text">网站</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#标题"><span class="nav-number">2.2.7.2.</span> <span class="nav-text">标题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关键词"><span class="nav-number">2.2.7.3.</span> <span class="nav-text">关键词</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#描述"><span class="nav-number">2.2.7.4.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP-头"><span class="nav-number">2.2.7.5.</span> <span class="nav-text">HTTP 头</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FQFA"><span class="nav-number">2.2.8.</span> <span class="nav-text">FQFA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本语法-1"><span class="nav-number">2.2.9.</span> <span class="nav-text">基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#title-”abc”-从标题中搜索abc"><span class="nav-number">2.2.9.1.</span> <span class="nav-text">title=”abc” 从标题中搜索abc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#header-”abc”-从http头中搜索abc"><span class="nav-number">2.2.9.2.</span> <span class="nav-text">header=”abc” 从http头中搜索abc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#body-”abc”-从html正文中搜索abc"><span class="nav-number">2.2.9.3.</span> <span class="nav-text">body=”abc” 从html正文中搜索abc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#domain-”qq-com”-搜索根域名带有qq-com的网站"><span class="nav-number">2.2.9.4.</span> <span class="nav-text">domain=”qq.com” 搜索根域名带有qq.com的网站</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#host-”-gov-cn”-从url中搜索-gov-cn"><span class="nav-number">2.2.9.5.</span> <span class="nav-text">host=”.gov.cn” 从url中搜索.gov.cn</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#教育网站"><span class="nav-number">2.2.9.6.</span> <span class="nav-text">教育网站</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#port-”443”-查找对应443端口的资产"><span class="nav-number">2.2.9.7.</span> <span class="nav-text">port=”443” 查找对应443端口的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ip-”1-1-1-1”-搜索ip信息"><span class="nav-number">2.2.9.8.</span> <span class="nav-text">ip=”1.1.1.1” 搜索ip信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#protocol-”https”-搜索制定协议类型-在开启端口扫描的情况下有效"><span class="nav-number">2.2.9.9.</span> <span class="nav-text">protocol=”https” 搜索制定协议类型(在开启端口扫描的情况下有效)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索指定城市的资产"><span class="nav-number">2.2.9.10.</span> <span class="nav-text">搜索指定城市的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索指定行政区的资产"><span class="nav-number">2.2.9.11.</span> <span class="nav-text">搜索指定行政区的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索指定国家-编码-的资产"><span class="nav-number">2.2.9.12.</span> <span class="nav-text">搜索指定国家(编码)的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索证书-https或者imaps等-中带有google的资产"><span class="nav-number">2.2.9.13.</span> <span class="nav-text">搜索证书(https或者imaps等)中带有google的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索FTP协议中带有users文本的资产"><span class="nav-number">2.2.9.14.</span> <span class="nav-text">搜索FTP协议中带有users文本的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索所有协议资产，支持subdomain和service两种"><span class="nav-number">2.2.9.15.</span> <span class="nav-text">搜索所有协议资产，支持subdomain和service两种</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索Windows资产"><span class="nav-number">2.2.9.16.</span> <span class="nav-text">搜索Windows资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索IIS-7-5服务器"><span class="nav-number">2.2.9.17.</span> <span class="nav-text">搜索IIS 7.5服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索海康威视设备"><span class="nav-number">2.2.9.18.</span> <span class="nav-text">搜索海康威视设备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#时间范围段搜索"><span class="nav-number">2.2.9.19.</span> <span class="nav-text">时间范围段搜索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索指定org-组织-的资产"><span class="nav-number">2.2.9.20.</span> <span class="nav-text">搜索指定org(组织)的资产</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索指定udp协议的资产"><span class="nav-number">2.2.9.21.</span> <span class="nav-text">搜索指定udp协议的资产</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级搜索"><span class="nav-number">2.2.10.</span> <span class="nav-text">高级搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#规则探索与发现"><span class="nav-number">2.2.11.</span> <span class="nav-text">规则探索与发现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#子域名收集"><span class="nav-number">2.3.</span> <span class="nav-text">子域名收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#爆破"><span class="nav-number">2.3.1.</span> <span class="nav-text">爆破</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在线爆破工具"><span class="nav-number">2.3.2.</span> <span class="nav-text">在线爆破工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地工具爆破"><span class="nav-number">2.3.3.</span> <span class="nav-text">本地工具爆破</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#API"><span class="nav-number">2.3.4.</span> <span class="nav-text">API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索引擎"><span class="nav-number">2.3.4.1.</span> <span class="nav-text">搜索引擎</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OneForAll"><span class="nav-number">2.3.4.2.</span> <span class="nav-text">OneForAll</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自己动手丰衣足食"><span class="nav-number">2.3.4.3.</span> <span class="nav-text">自己动手丰衣足食</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS-域传送漏洞"><span class="nav-number">2.3.5.</span> <span class="nav-text">DNS 域传送漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是DNS"><span class="nav-number">2.3.5.1.</span> <span class="nav-text">什么是DNS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nslookup-命令"><span class="nav-number">2.3.5.2.</span> <span class="nav-text">nslookup 命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#域传送漏洞"><span class="nav-number">2.3.5.3.</span> <span class="nav-text">域传送漏洞</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C段与旁站-渐渐没落"><span class="nav-number">2.4.</span> <span class="nav-text">C段与旁站(渐渐没落)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础知识"><span class="nav-number">2.4.1.</span> <span class="nav-text">基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是-IP-地址"><span class="nav-number">2.4.1.1.</span> <span class="nav-text">什么是 IP 地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP地址的类别"><span class="nav-number">2.4.1.2.</span> <span class="nav-text">IP地址的类别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP-地址的网络和主机部分"><span class="nav-number">2.4.1.3.</span> <span class="nav-text">IP 地址的网络和主机部分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网络掩码"><span class="nav-number">2.4.1.4.</span> <span class="nav-text">网络掩码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#A-段-B-段-C-段"><span class="nav-number">2.4.2.</span> <span class="nav-text">A 段 B 段 C 段</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#黑客所说的C段是什么意思"><span class="nav-number">2.4.2.1.</span> <span class="nav-text">黑客所说的C段是什么意思</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#必应接口-没落"><span class="nav-number">2.4.3.</span> <span class="nav-text">必应接口(没落)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#在线查询"><span class="nav-number">2.4.3.1.</span> <span class="nav-text">在线查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#K8-C段旁注工具-6-0"><span class="nav-number">2.4.3.2.</span> <span class="nav-text">K8 C段旁注工具 6.0</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#爱站"><span class="nav-number">2.4.3.3.</span> <span class="nav-text">爱站</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Fofa"><span class="nav-number">2.4.3.4.</span> <span class="nav-text">Fofa</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#工具"><span class="nav-number">2.4.4.</span> <span class="nav-text">工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTPScan"><span class="nav-number">2.4.4.1.</span> <span class="nav-text">HTTPScan</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#http端口查询-标题获取"><span class="nav-number">2.4.4.2.</span> <span class="nav-text">http端口查询+标题获取</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务器信息查询"><span class="nav-number">2.5.</span> <span class="nav-text">服务器信息查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CDN-介绍"><span class="nav-number">2.5.1.</span> <span class="nav-text">CDN 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CDN-判断与绕过"><span class="nav-number">2.5.2.</span> <span class="nav-text">CDN 判断与绕过</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ping-命令"><span class="nav-number">2.5.2.1.</span> <span class="nav-text">ping 命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#slookup-查询"><span class="nav-number">2.5.2.2.</span> <span class="nav-text">slookup 查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多地-ping"><span class="nav-number">2.5.2.3.</span> <span class="nav-text">多地 ping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子域名绕过"><span class="nav-number">2.5.2.4.</span> <span class="nav-text">子域名绕过</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#利用站点功能主动发起请求"><span class="nav-number">2.5.2.5.</span> <span class="nav-text">利用站点功能主动发起请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#利用网站漏洞"><span class="nav-number">2.5.2.6.</span> <span class="nav-text">利用网站漏洞</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#国外访问"><span class="nav-number">2.5.2.7.</span> <span class="nav-text">国外访问</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#社工信息收集"><span class="nav-number">2.6.</span> <span class="nav-text">社工信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#whois查询"><span class="nav-number">2.6.1.</span> <span class="nav-text">whois查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注册网站查询"><span class="nav-number">2.6.2.</span> <span class="nav-text">注册网站查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#密码泄露查询"><span class="nav-number">2.6.3.</span> <span class="nav-text">密码泄露查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TG-群信息收集"><span class="nav-number">2.6.4.</span> <span class="nav-text">TG 群信息收集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开房记录查询"><span class="nav-number">2.6.5.</span> <span class="nav-text">开房记录查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#国家职业资格证查询"><span class="nav-number">2.6.6.</span> <span class="nav-text">国家职业资格证查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他查询"><span class="nav-number">2.6.7.</span> <span class="nav-text">其他查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#身份证查询"><span class="nav-number">2.6.7.1.</span> <span class="nav-text">身份证查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#经纬度查询"><span class="nav-number">2.6.7.2.</span> <span class="nav-text">经纬度查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#微信搜索"><span class="nav-number">2.6.7.3.</span> <span class="nav-text">微信搜索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#泄露网站查询"><span class="nav-number">2.6.7.4.</span> <span class="nav-text">泄露网站查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#邮件泄露查询"><span class="nav-number">2.6.7.5.</span> <span class="nav-text">邮件泄露查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#密码强度检测"><span class="nav-number">2.6.7.6.</span> <span class="nav-text">密码强度检测</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Github-信息收集"><span class="nav-number">2.6.8.</span> <span class="nav-text">Github 信息收集</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#主动信息收集"><span class="nav-number">3.</span> <span class="nav-text">主动信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Nmap-与-Masscan"><span class="nav-number">3.1.</span> <span class="nav-text">Nmap 与 Masscan</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Nmap-介绍"><span class="nav-number">3.1.1.</span> <span class="nav-text">Nmap 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#端口介绍"><span class="nav-number">3.1.2.</span> <span class="nav-text">端口介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#UDP-端口"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">UDP 端口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#协议端口"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">协议端口</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#端口状态"><span class="nav-number">3.1.3.</span> <span class="nav-text">端口状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主机发现"><span class="nav-number">3.1.4.</span> <span class="nav-text">主机发现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一个简单的扫描"><span class="nav-number">3.1.5.</span> <span class="nav-text">一个简单的扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-Zenmap-进行扫描"><span class="nav-number">3.1.6.</span> <span class="nav-text">使用 Zenmap 进行扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ping-扫描"><span class="nav-number">3.1.7.</span> <span class="nav-text">Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无-Ping-扫描"><span class="nav-number">3.1.8.</span> <span class="nav-text">无 Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-SYN-Ping-扫描"><span class="nav-number">3.1.9.</span> <span class="nav-text">TCP SYN Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-ACK-Ping-扫描"><span class="nav-number">3.1.10.</span> <span class="nav-text">TCP ACK Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-Ping-扫描"><span class="nav-number">3.1.11.</span> <span class="nav-text">UDP Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CMP-Ping-Types-扫描"><span class="nav-number">3.1.12.</span> <span class="nav-text">CMP Ping Types 扫描</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ICMP-Echo-扫描"><span class="nav-number">3.1.12.1.</span> <span class="nav-text">ICMP Echo 扫描</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ICMP-时间戳-Ping-扫描"><span class="nav-number">3.1.12.2.</span> <span class="nav-text">ICMP 时间戳 Ping 扫描</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ICMP-地址掩码-Ping-扫描"><span class="nav-number">3.1.12.3.</span> <span class="nav-text">ICMP 地址掩码 Ping 扫描</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ARP-Ping-扫描"><span class="nav-number">3.1.13.</span> <span class="nav-text">ARP Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#扫描列表"><span class="nav-number">3.1.14.</span> <span class="nav-text">扫描列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#扫描一个-IPv6-地址"><span class="nav-number">3.1.15.</span> <span class="nav-text">扫描一个 IPv6 地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由跟踪"><span class="nav-number">3.1.16.</span> <span class="nav-text">路由跟踪</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SCTP-INIT-Ping-扫描"><span class="nav-number">3.1.17.</span> <span class="nav-text">SCTP INIT Ping 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#探索网络"><span class="nav-number">3.1.18.</span> <span class="nav-text">探索网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#时间模板"><span class="nav-number">3.1.19.</span> <span class="nav-text">时间模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指定端口"><span class="nav-number">3.1.20.</span> <span class="nav-text">指定端口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-SYN-扫描"><span class="nav-number">3.1.21.</span> <span class="nav-text">TCP SYN 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-连接扫描"><span class="nav-number">3.1.22.</span> <span class="nav-text">TCP 连接扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-扫描"><span class="nav-number">3.1.23.</span> <span class="nav-text">UDP 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐蔽扫描"><span class="nav-number">3.1.24.</span> <span class="nav-text">隐蔽扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-ACK-扫描"><span class="nav-number">3.1.25.</span> <span class="nav-text">TCP ACK 扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-窗口扫描"><span class="nav-number">3.1.26.</span> <span class="nav-text">TCP 窗口扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指纹探测"><span class="nav-number">3.1.27.</span> <span class="nav-text">指纹探测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#保存输出"><span class="nav-number">3.1.28.</span> <span class="nav-text">保存输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Masscan"><span class="nav-number">3.1.29.</span> <span class="nav-text">Masscan</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#漏洞扫描工具"><span class="nav-number">3.2.</span> <span class="nav-text">漏洞扫描工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AWVS"><span class="nav-number">3.3.</span> <span class="nav-text">AWVS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nessus-主机漏洞扫描"><span class="nav-number">3.4.</span> <span class="nav-text">Nessus 主机漏洞扫描</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本网络扫描"><span class="nav-number">3.4.1.</span> <span class="nav-text">基本网络扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web-应用测试"><span class="nav-number">3.4.2.</span> <span class="nav-text">Web 应用测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Xray"><span class="nav-number">3.5.</span> <span class="nav-text">Xray</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">离沫凌天๓</span>

  
</div>

<!--

  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>

-->

<div class="busuanzi-count">
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="site-uv">
      <i class="fa fa-user"></i>
    来访人数：<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 
    </span>
    <div class="powered-by"></div>
    <span class="site-uv">
      <i class="fa fa-eye"></i>
    访问次数：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
    <!-- 博客字数统计 -->
    <span class="site-pv">
      <i class="fa fa-pencil"></i>
    全站字数：<span class="post-count">115.8k</span>
    </span>
</div>





<div class="BbeiAn-info">
   	<!--津ICP备  -->
    <a target="_blank" href="http://www.beian.miit.gov.cn/" style="color:#f0d784" rel="nofollow">津ICP备18005284</a> <!--a标签中增加nofollow属性，避免爬虫出站。-->| 
	<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12011102000578" style="color:#f0d784;text-decoration:none;padding-left:30px;background:url(https://s1.ax1x.com/2018/09/29/ilmwIH.png) no-repeat left center" rel="nofollow">津公网安备12011102000578号</a>	  <!--这里将图标作为了背景，以使得能和后面的文字在同一行-->
</div>

<!--

  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>

-->



<!-- 在网页底部添加网站运行时间 -->
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("05/21/2019 00:00:00");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "Run for "+dnum+" Days ";
        document.getElementById("times").innerHTML = hnum + " Hours " + mnum + " m " + snum + " s";
    }
setInterval("createtime()",250);
</script>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  


  <script type="text/javascript" src="/js/src/clicklove.js"></script>

</body>
</html>
